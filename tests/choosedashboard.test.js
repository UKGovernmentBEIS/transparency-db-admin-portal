// ***********************************************************
// Automated Unit testing scripts for page route
// ***********************************************************

const index = require("../app");
const request = require("supertest");
const express = require("express");
const app = express();
const bodyParser = require("body-parser");
const axios = require("axios");
jest.mock("axios");
app.use(
  bodyParser.urlencoded({
    extended: false,
  })
);
app.use(bodyParser.json());
app.use(
  express.urlencoded({
    extended: false,
  })
);
app.use("/", index);

const mockRequest = (sessionData, body) => ({
  session: {
    data: sessionData,
  },
  body,
});

const res = {};

test("Unit testing for Choose Dashboard BEIS Admin Test for POST call", (done) => {
  axios.get.mockResolvedValue({
    status: 200,
    data: {
      grantingAuthorityUserActionCount: {
        totalGrantingAuthority: 67,
        totalActiveGA: 0,
        totalDeactiveGA: 0,
      },
      awardUserActionCount: {
        totalAwaitingAward: 264,
        totalDraftAward: 0,
        totalSubsidyAward: 283,
        totalPublishedAward: 9,
        totalDeletedAward: 0,
      },
      subsidyMeasureUserActionCount: {
        totalPublishedSubsidyMeasures: 0,
        totalDraftSubsidyMeasures: 114,
        totalSubsidyMeasures: 114,
        totalAwaitingSubsidyMeasures: 0,
        totalDeletedSubsidyMeasures: 0,
      },
      awardResponse: [
        {
          awardNumber: 225,
          subsidyFullAmountExact: "600,000",
          subsidyFullAmountRange: "£NA",
          subsidyObjective: "Employment",
          subsidyMeasureTitle: "Young Audiences Content Fund",
          status: "Rejected",
          gaName: "The Foundation for Social Entrepreneurs (T/A UnLtd)",
          lastModifiedDate: "12 January 2021",
          scNumber: "SC10112",
          subsidyInstrument: "Equity",
          beneficiaryName: "BEST MARIGOLD FILMS LIMITED",
        },
        {
          awardNumber: 224,
          subsidyFullAmountExact: "400,000",
          subsidyFullAmountRange: "£NA",
          subsidyObjective: "Training",
          subsidyMeasureTitle: "Woodland Carbon Fund",
          status: "Published",
          gaName: "Key Funds Investments Limited",
          lastModifiedDate: "12 January 2021",
          scNumber: "SC10111",
          subsidyInstrument: "Loan",
          beneficiaryName: "STREET CAT BOB FILM LIMITED",
        },
        {
          awardNumber: 218,
          subsidyFullAmountExact: "800,000",
          subsidyFullAmountRange: "£NA",
          subsidyObjective: "Research and development",
          subsidyMeasureTitle: "Walney Offshore Wind Farm",
          status: "Rejected",
          gaName: "The National Lottery Heritage Fund",
          lastModifiedDate: "12 January 2021",
          scNumber: "SC10104",
          subsidyInstrument: "Guarantee",
          beneficiaryName: "ANOTHER MOTHERS SON LTD",
        },
        {
          awardNumber: 220,
          subsidyFullAmountExact: "1,000,000",
          subsidyFullAmountRange: "£NA",
          subsidyObjective: "Energy efficiency",
          subsidyMeasureTitle: "Waterborne Freight Grant",
          status: "Rejected",
          gaName: "WM5G",
          lastModifiedDate: "12 January 2021",
          scNumber: "SC10106",
          subsidyInstrument:
            "Provision of goods or services below market prices",
          beneficiaryName: "Thalamus Health Ltd",
        },
        {
          awardNumber: 718,
          subsidyFullAmountExact: "0",
          subsidyFullAmountRange: "£30,000,001",
          subsidyObjective: "Research and development",
          subsidyMeasureTitle: "AHDB Generic Promotional Measures scheme",
          status: "Published",
          gaName: "HMRC",
          lastModifiedDate: "12 January 2021",
          scNumber: "SC10000",
          subsidyInstrument: "Loan",
          beneficiaryName: "DS SMITH PAPER LIMITED 100",
        },
      ],
      subsidyMeasureResponse: [
        {
          subsidyMeasureTitle: "Grant Assistance for the Historic Environment",
          scNumber: "SC10029",
          startDate: "2014-01-01",
          endDate: "2024-01-01",
          duration: "10 years 2 days ",
          budget: "300000000",
          gaName: "North East Combined Authority",
          lastModifiedDate: "06 January 2021",
        },
        {
          subsidyMeasureTitle: "AHDB Generic Promotional Measures scheme",
          scNumber: "SC10000",
          startDate: "2015-04-01",
          endDate: "2021-03-31",
          duration: "6 years 1 day ",
          budget: "120000000",
          gaName: "Welsh assembly government",
          lastModifiedDate: "04 January 2021",
        },
        {
          subsidyMeasureTitle: "AHDB Promotional Measures scheme",
          scNumber: "SC10001",
          startDate: "2014-10-23",
          endDate: "2021-03-31",
          duration: "6 years 5 months 3 weeks ",
          budget: "180000000",
          gaName: "Scottish Government",
          lastModifiedDate: "04 January 2021",
        },
        {
          subsidyMeasureTitle: "Aid for economic development - Growth Deal",
          scNumber: "SC10002",
          startDate: "2015-04-01",
          endDate: "2021-03-31",
          duration: "6 years 1 day ",
          budget: "64000000",
          gaName: "Northern Ireland",
          lastModifiedDate: "04 January 2021",
        },
        {
          subsidyMeasureTitle: "Aid for economic development - Growth Deal",
          scNumber: "SC10003",
          startDate: "2015-04-01",
          endDate: "2021-03-31",
          duration: "6 years 1 day ",
          budget: "64000000",
          gaName: "HMRC",
          lastModifiedDate: "04 January 2021",
        },
      ],
      grantingAuthorityResponse: [
        {
          gaId: 2,
          gaName: "Scottish Government",
          status: "DRAFT",
          lastModifiedDate: "04 January 2021",
        },
        {
          gaId: 3,
          gaName: "Northern Ireland",
          status: "DRAFT",
          lastModifiedDate: "04 January 2021",
        },
        {
          gaId: 4,
          gaName: "HMRC",
          status: "DRAFT",
          lastModifiedDate: "04 January 2021",
        },
        {
          gaId: 5,
          gaName: "DEFRA",
          status: "DRAFT",
          lastModifiedDate: "04 January 2021",
        },
        {
          gaId: 1,
          gaName: "Welsh assembly government",
          status: "DRAFT",
          lastModifiedDate: "04 January 2021",
        },
      ],
    },
  });

  axios.post.mockResolvedValue({
    status: 200,
    data: {
      access_token: "",
    },
  });

  global.dashboardawards = {
    grantingAuthorityUserActionCount: {
      totalGrantingAuthority: 67,
      totalActiveGA: 0,
      totalDeactiveGA: 0,
    },
    awardUserActionCount: {
      totalAwaitingAward: 264,
      totalDraftAward: 0,
      totalSubsidyAward: 283,
      totalPublishedAward: 9,
      totalDeletedAward: 0,
    },
    subsidyMeasureUserActionCount: {
      totalPublishedSubsidyMeasures: 0,
      totalDraftSubsidyMeasures: 114,
      totalSubsidyMeasures: 114,
      totalAwaitingSubsidyMeasures: 0,
      totalDeletedSubsidyMeasures: 0,
    },
    awardResponse: [
      {
        awardNumber: 225,
        subsidyFullAmountExact: "600,000",
        subsidyFullAmountRange: "£NA",
        subsidyObjective: "Employment",
        subsidyMeasureTitle: "Young Audiences Content Fund",
        status: "Rejected",
        gaName: "The Foundation for Social Entrepreneurs (T/A UnLtd)",
        lastModifiedDate: "12 January 2021",
        scNumber: "SC10112",
        subsidyInstrument: "Equity",
        beneficiaryName: "BEST MARIGOLD FILMS LIMITED",
      },
      {
        awardNumber: 224,
        subsidyFullAmountExact: "400,000",
        subsidyFullAmountRange: "£NA",
        subsidyObjective: "Training",
        subsidyMeasureTitle: "Woodland Carbon Fund",
        status: "Published",
        gaName: "Key Funds Investments Limited",
        lastModifiedDate: "12 January 2021",
        scNumber: "SC10111",
        subsidyInstrument: "Loan",
        beneficiaryName: "STREET CAT BOB FILM LIMITED",
      },
      {
        awardNumber: 218,
        subsidyFullAmountExact: "800,000",
        subsidyFullAmountRange: "£NA",
        subsidyObjective: "Research and development",
        subsidyMeasureTitle: "Walney Offshore Wind Farm",
        status: "Rejected",
        gaName: "The National Lottery Heritage Fund",
        lastModifiedDate: "12 January 2021",
        scNumber: "SC10104",
        subsidyInstrument: "Guarantee",
        beneficiaryName: "ANOTHER MOTHERS SON LTD",
      },
      {
        awardNumber: 220,
        subsidyFullAmountExact: "1,000,000",
        subsidyFullAmountRange: "£NA",
        subsidyObjective: "Energy efficiency",
        subsidyMeasureTitle: "Waterborne Freight Grant",
        status: "Rejected",
        gaName: "WM5G",
        lastModifiedDate: "12 January 2021",
        scNumber: "SC10106",
        subsidyInstrument: "Provision of goods or services below market prices",
        beneficiaryName: "Thalamus Health Ltd",
      },
      {
        awardNumber: 718,
        subsidyFullAmountExact: "0",
        subsidyFullAmountRange: "£30,000,001",
        subsidyObjective: "Research and development",
        subsidyMeasureTitle: "AHDB Generic Promotional Measures scheme",
        status: "Published",
        gaName: "HMRC",
        lastModifiedDate: "12 January 2021",
        scNumber: "SC10000",
        subsidyInstrument: "Loan",
        beneficiaryName: "DS SMITH PAPER LIMITED 100",
      },
    ],
    subsidyMeasureResponse: [
      {
        subsidyMeasureTitle: "Grant Assistance for the Historic Environment",
        scNumber: "SC10029",
        startDate: "2014-01-01",
        endDate: "2024-01-01",
        duration: "10 years 2 days ",
        budget: "300000000",
        gaName: "North East Combined Authority",
        lastModifiedDate: "06 January 2021",
      },
      {
        subsidyMeasureTitle: "AHDB Generic Promotional Measures scheme",
        scNumber: "SC10000",
        startDate: "2015-04-01",
        endDate: "2021-03-31",
        duration: "6 years 1 day ",
        budget: "120000000",
        gaName: "Welsh assembly government",
        lastModifiedDate: "04 January 2021",
      },
      {
        subsidyMeasureTitle: "AHDB Promotional Measures scheme",
        scNumber: "SC10001",
        startDate: "2014-10-23",
        endDate: "2021-03-31",
        duration: "6 years 5 months 3 weeks ",
        budget: "180000000",
        gaName: "Scottish Government",
        lastModifiedDate: "04 January 2021",
      },
      {
        subsidyMeasureTitle: "Aid for economic development - Growth Deal",
        scNumber: "SC10002",
        startDate: "2015-04-01",
        endDate: "2021-03-31",
        duration: "6 years 1 day ",
        budget: "64000000",
        gaName: "Northern Ireland",
        lastModifiedDate: "04 January 2021",
      },
      {
        subsidyMeasureTitle: "Aid for economic development - Growth Deal",
        scNumber: "SC10003",
        startDate: "2015-04-01",
        endDate: "2021-03-31",
        duration: "6 years 1 day ",
        budget: "64000000",
        gaName: "HMRC",
        lastModifiedDate: "04 January 2021",
      },
    ],
    grantingAuthorityResponse: [
      {
        gaId: 2,
        gaName: "Scottish Government",
        status: "DRAFT",
        lastModifiedDate: "04 January 2021",
      },
      {
        gaId: 3,
        gaName: "Northern Ireland",
        status: "DRAFT",
        lastModifiedDate: "04 January 2021",
      },
      {
        gaId: 4,
        gaName: "HMRC",
        status: "DRAFT",
        lastModifiedDate: "04 January 2021",
      },
      {
        gaId: 5,
        gaName: "DEFRA",
        status: "DRAFT",
        lastModifiedDate: "04 January 2021",
      },
      {
        gaId: 1,
        gaName: "Welsh assembly government",
        status: "DRAFT",
        lastModifiedDate: "04 January 2021",
      },
    ],
  };
  // global.process = {
  //   argv: ["", "", "env=dev"],
  // };
  global.process.argv = ["", "", "env=dev"];
  global.beis_url_accessmanagement =
    "https://dev-beis-tp-db-accessmanagement-service-app.azurewebsites.net";
  const req = mockRequest();

  const res = {};
  request(app)
    .post("/choosedashboard", (req, res))
    .send({
      dashboard_username: "Andrew Davis",
      dashboard_roles: "BEIS Administrator",
      dashboard_GA: "",
    })
    .expect(200, done);
  // expect(abcd).toBe(200);
});

test("Unit testing for Choose Dashboard GA Admin Test for POST call", (done) => {
  axios.get.mockResolvedValue({
    status: 200,
    data: {
      grantingAuthorityUserActionCount: {
        totalGrantingAuthority: 67,
        totalActiveGA: 0,
        totalDeactiveGA: 0,
      },
      awardUserActionCount: {
        totalAwaitingAward: 264,
        totalDraftAward: 0,
        totalSubsidyAward: 283,
        totalPublishedAward: 9,
        totalDeletedAward: 0,
      },
      subsidyMeasureUserActionCount: {
        totalPublishedSubsidyMeasures: 0,
        totalDraftSubsidyMeasures: 114,
        totalSubsidyMeasures: 114,
        totalAwaitingSubsidyMeasures: 0,
        totalDeletedSubsidyMeasures: 0,
      },
      awardResponse: [
        {
          awardNumber: 225,
          subsidyFullAmountExact: "600,000",
          subsidyFullAmountRange: "£NA",
          subsidyObjective: "Employment",
          subsidyMeasureTitle: "Young Audiences Content Fund",
          status: "Rejected",
          gaName: "The Foundation for Social Entrepreneurs (T/A UnLtd)",
          lastModifiedDate: "12 January 2021",
          scNumber: "SC10112",
          subsidyInstrument: "Equity",
          beneficiaryName: "BEST MARIGOLD FILMS LIMITED",
        },
        {
          awardNumber: 224,
          subsidyFullAmountExact: "400,000",
          subsidyFullAmountRange: "£NA",
          subsidyObjective: "Training",
          subsidyMeasureTitle: "Woodland Carbon Fund",
          status: "Published",
          gaName: "Key Funds Investments Limited",
          lastModifiedDate: "12 January 2021",
          scNumber: "SC10111",
          subsidyInstrument: "Loan",
          beneficiaryName: "STREET CAT BOB FILM LIMITED",
        },
        {
          awardNumber: 218,
          subsidyFullAmountExact: "800,000",
          subsidyFullAmountRange: "£NA",
          subsidyObjective: "Research and development",
          subsidyMeasureTitle: "Walney Offshore Wind Farm",
          status: "Rejected",
          gaName: "The National Lottery Heritage Fund",
          lastModifiedDate: "12 January 2021",
          scNumber: "SC10104",
          subsidyInstrument: "Guarantee",
          beneficiaryName: "ANOTHER MOTHERS SON LTD",
        },
        {
          awardNumber: 220,
          subsidyFullAmountExact: "1,000,000",
          subsidyFullAmountRange: "£NA",
          subsidyObjective: "Energy efficiency",
          subsidyMeasureTitle: "Waterborne Freight Grant",
          status: "Rejected",
          gaName: "WM5G",
          lastModifiedDate: "12 January 2021",
          scNumber: "SC10106",
          subsidyInstrument:
            "Provision of goods or services below market prices",
          beneficiaryName: "Thalamus Health Ltd",
        },
        {
          awardNumber: 718,
          subsidyFullAmountExact: "0",
          subsidyFullAmountRange: "£30,000,001",
          subsidyObjective: "Research and development",
          subsidyMeasureTitle: "AHDB Generic Promotional Measures scheme",
          status: "Published",
          gaName: "HMRC",
          lastModifiedDate: "12 January 2021",
          scNumber: "SC10000",
          subsidyInstrument: "Loan",
          beneficiaryName: "DS SMITH PAPER LIMITED 100",
        },
      ],
      subsidyMeasureResponse: [
        {
          subsidyMeasureTitle: "Grant Assistance for the Historic Environment",
          scNumber: "SC10029",
          startDate: "2014-01-01",
          endDate: "2024-01-01",
          duration: "10 years 2 days ",
          budget: "300000000",
          gaName: "North East Combined Authority",
          lastModifiedDate: "06 January 2021",
        },
        {
          subsidyMeasureTitle: "AHDB Generic Promotional Measures scheme",
          scNumber: "SC10000",
          startDate: "2015-04-01",
          endDate: "2021-03-31",
          duration: "6 years 1 day ",
          budget: "120000000",
          gaName: "Welsh assembly government",
          lastModifiedDate: "04 January 2021",
        },
        {
          subsidyMeasureTitle: "AHDB Promotional Measures scheme",
          scNumber: "SC10001",
          startDate: "2014-10-23",
          endDate: "2021-03-31",
          duration: "6 years 5 months 3 weeks ",
          budget: "180000000",
          gaName: "Scottish Government",
          lastModifiedDate: "04 January 2021",
        },
        {
          subsidyMeasureTitle: "Aid for economic development - Growth Deal",
          scNumber: "SC10002",
          startDate: "2015-04-01",
          endDate: "2021-03-31",
          duration: "6 years 1 day ",
          budget: "64000000",
          gaName: "Northern Ireland",
          lastModifiedDate: "04 January 2021",
        },
        {
          subsidyMeasureTitle: "Aid for economic development - Growth Deal",
          scNumber: "SC10003",
          startDate: "2015-04-01",
          endDate: "2021-03-31",
          duration: "6 years 1 day ",
          budget: "64000000",
          gaName: "HMRC",
          lastModifiedDate: "04 January 2021",
        },
      ],
      grantingAuthorityResponse: [
        {
          gaId: 2,
          gaName: "Scottish Government",
          status: "DRAFT",
          lastModifiedDate: "04 January 2021",
        },
        {
          gaId: 3,
          gaName: "Northern Ireland",
          status: "DRAFT",
          lastModifiedDate: "04 January 2021",
        },
        {
          gaId: 4,
          gaName: "HMRC",
          status: "DRAFT",
          lastModifiedDate: "04 January 2021",
        },
        {
          gaId: 5,
          gaName: "DEFRA",
          status: "DRAFT",
          lastModifiedDate: "04 January 2021",
        },
        {
          gaId: 1,
          gaName: "Welsh assembly government",
          status: "DRAFT",
          lastModifiedDate: "04 January 2021",
        },
      ],
    },
  });

  global.dashboardawards = {
    grantingAuthorityUserActionCount: {
      totalGrantingAuthority: 67,
      totalActiveGA: 0,
      totalDeactiveGA: 0,
    },
    awardUserActionCount: {
      totalAwaitingAward: 264,
      totalDraftAward: 0,
      totalSubsidyAward: 283,
      totalPublishedAward: 9,
      totalDeletedAward: 0,
    },
    subsidyMeasureUserActionCount: {
      totalPublishedSubsidyMeasures: 0,
      totalDraftSubsidyMeasures: 114,
      totalSubsidyMeasures: 114,
      totalAwaitingSubsidyMeasures: 0,
      totalDeletedSubsidyMeasures: 0,
    },
    awardResponse: [
      {
        awardNumber: 225,
        subsidyFullAmountExact: "600,000",
        subsidyFullAmountRange: "£NA",
        subsidyObjective: "Employment",
        subsidyMeasureTitle: "Young Audiences Content Fund",
        status: "Rejected",
        gaName: "The Foundation for Social Entrepreneurs (T/A UnLtd)",
        lastModifiedDate: "12 January 2021",
        scNumber: "SC10112",
        subsidyInstrument: "Equity",
        beneficiaryName: "BEST MARIGOLD FILMS LIMITED",
      },
      {
        awardNumber: 224,
        subsidyFullAmountExact: "400,000",
        subsidyFullAmountRange: "£NA",
        subsidyObjective: "Training",
        subsidyMeasureTitle: "Woodland Carbon Fund",
        status: "Published",
        gaName: "Key Funds Investments Limited",
        lastModifiedDate: "12 January 2021",
        scNumber: "SC10111",
        subsidyInstrument: "Loan",
        beneficiaryName: "STREET CAT BOB FILM LIMITED",
      },
      {
        awardNumber: 218,
        subsidyFullAmountExact: "800,000",
        subsidyFullAmountRange: "£NA",
        subsidyObjective: "Research and development",
        subsidyMeasureTitle: "Walney Offshore Wind Farm",
        status: "Rejected",
        gaName: "The National Lottery Heritage Fund",
        lastModifiedDate: "12 January 2021",
        scNumber: "SC10104",
        subsidyInstrument: "Guarantee",
        beneficiaryName: "ANOTHER MOTHERS SON LTD",
      },
      {
        awardNumber: 220,
        subsidyFullAmountExact: "1,000,000",
        subsidyFullAmountRange: "£NA",
        subsidyObjective: "Energy efficiency",
        subsidyMeasureTitle: "Waterborne Freight Grant",
        status: "Rejected",
        gaName: "WM5G",
        lastModifiedDate: "12 January 2021",
        scNumber: "SC10106",
        subsidyInstrument: "Provision of goods or services below market prices",
        beneficiaryName: "Thalamus Health Ltd",
      },
      {
        awardNumber: 718,
        subsidyFullAmountExact: "0",
        subsidyFullAmountRange: "£30,000,001",
        subsidyObjective: "Research and development",
        subsidyMeasureTitle: "AHDB Generic Promotional Measures scheme",
        status: "Published",
        gaName: "HMRC",
        lastModifiedDate: "12 January 2021",
        scNumber: "SC10000",
        subsidyInstrument: "Loan",
        beneficiaryName: "DS SMITH PAPER LIMITED 100",
      },
    ],
    subsidyMeasureResponse: [
      {
        subsidyMeasureTitle: "Grant Assistance for the Historic Environment",
        scNumber: "SC10029",
        startDate: "2014-01-01",
        endDate: "2024-01-01",
        duration: "10 years 2 days ",
        budget: "300000000",
        gaName: "North East Combined Authority",
        lastModifiedDate: "06 January 2021",
      },
      {
        subsidyMeasureTitle: "AHDB Generic Promotional Measures scheme",
        scNumber: "SC10000",
        startDate: "2015-04-01",
        endDate: "2021-03-31",
        duration: "6 years 1 day ",
        budget: "120000000",
        gaName: "Welsh assembly government",
        lastModifiedDate: "04 January 2021",
      },
      {
        subsidyMeasureTitle: "AHDB Promotional Measures scheme",
        scNumber: "SC10001",
        startDate: "2014-10-23",
        endDate: "2021-03-31",
        duration: "6 years 5 months 3 weeks ",
        budget: "180000000",
        gaName: "Scottish Government",
        lastModifiedDate: "04 January 2021",
      },
      {
        subsidyMeasureTitle: "Aid for economic development - Growth Deal",
        scNumber: "SC10002",
        startDate: "2015-04-01",
        endDate: "2021-03-31",
        duration: "6 years 1 day ",
        budget: "64000000",
        gaName: "Northern Ireland",
        lastModifiedDate: "04 January 2021",
      },
      {
        subsidyMeasureTitle: "Aid for economic development - Growth Deal",
        scNumber: "SC10003",
        startDate: "2015-04-01",
        endDate: "2021-03-31",
        duration: "6 years 1 day ",
        budget: "64000000",
        gaName: "HMRC",
        lastModifiedDate: "04 January 2021",
      },
    ],
    grantingAuthorityResponse: [
      {
        gaId: 2,
        gaName: "Scottish Government",
        status: "DRAFT",
        lastModifiedDate: "04 January 2021",
      },
      {
        gaId: 3,
        gaName: "Northern Ireland",
        status: "DRAFT",
        lastModifiedDate: "04 January 2021",
      },
      {
        gaId: 4,
        gaName: "HMRC",
        status: "DRAFT",
        lastModifiedDate: "04 January 2021",
      },
      {
        gaId: 5,
        gaName: "DEFRA",
        status: "DRAFT",
        lastModifiedDate: "04 January 2021",
      },
      {
        gaId: 1,
        gaName: "Welsh assembly government",
        status: "DRAFT",
        lastModifiedDate: "04 January 2021",
      },
    ],
  };
  // global.process = {
  //   argv: ["", "", "env=dev"],
  // };
  global.process.argv = ["", "", "env=dev"];
  global.beis_url_accessmanagement =
    "https://dev-beis-tp-db-accessmanagement-service-app.azurewebsites.net";
  const req = mockRequest();

  const res = {};
  request(app)
    .post("/choosedashboard", (req, res))
    .send({
      dashboard_username: "Andrew Davis",
      dashboard_roles: "Granting Authority Administrator",
      dashboard_GA: "",
    })
    .expect(200, done);
  // expect(abcd).toBe(200);
});

test("Unit testing for Choose Dashboard GA Approver Test for POST call", (done) => {
  axios.get.mockResolvedValue({
    status: 200,
    data: {
      grantingAuthorityUserActionCount: {
        totalGrantingAuthority: 67,
        totalActiveGA: 0,
        totalDeactiveGA: 0,
      },
      awardUserActionCount: {
        totalAwaitingAward: 264,
        totalDraftAward: 0,
        totalSubsidyAward: 283,
        totalPublishedAward: 9,
        totalDeletedAward: 0,
      },
      subsidyMeasureUserActionCount: {
        totalPublishedSubsidyMeasures: 0,
        totalDraftSubsidyMeasures: 114,
        totalSubsidyMeasures: 114,
        totalAwaitingSubsidyMeasures: 0,
        totalDeletedSubsidyMeasures: 0,
      },
      awardResponse: [
        {
          awardNumber: 225,
          subsidyFullAmountExact: "600,000",
          subsidyFullAmountRange: "£NA",
          subsidyObjective: "Employment",
          subsidyMeasureTitle: "Young Audiences Content Fund",
          status: "Rejected",
          gaName: "The Foundation for Social Entrepreneurs (T/A UnLtd)",
          lastModifiedDate: "12 January 2021",
          scNumber: "SC10112",
          subsidyInstrument: "Equity",
          beneficiaryName: "BEST MARIGOLD FILMS LIMITED",
        },
        {
          awardNumber: 224,
          subsidyFullAmountExact: "400,000",
          subsidyFullAmountRange: "£NA",
          subsidyObjective: "Training",
          subsidyMeasureTitle: "Woodland Carbon Fund",
          status: "Published",
          gaName: "Key Funds Investments Limited",
          lastModifiedDate: "12 January 2021",
          scNumber: "SC10111",
          subsidyInstrument: "Loan",
          beneficiaryName: "STREET CAT BOB FILM LIMITED",
        },
        {
          awardNumber: 218,
          subsidyFullAmountExact: "800,000",
          subsidyFullAmountRange: "£NA",
          subsidyObjective: "Research and development",
          subsidyMeasureTitle: "Walney Offshore Wind Farm",
          status: "Rejected",
          gaName: "The National Lottery Heritage Fund",
          lastModifiedDate: "12 January 2021",
          scNumber: "SC10104",
          subsidyInstrument: "Guarantee",
          beneficiaryName: "ANOTHER MOTHERS SON LTD",
        },
        {
          awardNumber: 220,
          subsidyFullAmountExact: "1,000,000",
          subsidyFullAmountRange: "£NA",
          subsidyObjective: "Energy efficiency",
          subsidyMeasureTitle: "Waterborne Freight Grant",
          status: "Rejected",
          gaName: "WM5G",
          lastModifiedDate: "12 January 2021",
          scNumber: "SC10106",
          subsidyInstrument:
            "Provision of goods or services below market prices",
          beneficiaryName: "Thalamus Health Ltd",
        },
        {
          awardNumber: 718,
          subsidyFullAmountExact: "0",
          subsidyFullAmountRange: "£30,000,001",
          subsidyObjective: "Research and development",
          subsidyMeasureTitle: "AHDB Generic Promotional Measures scheme",
          status: "Published",
          gaName: "HMRC",
          lastModifiedDate: "12 January 2021",
          scNumber: "SC10000",
          subsidyInstrument: "Loan",
          beneficiaryName: "DS SMITH PAPER LIMITED 100",
        },
      ],
      subsidyMeasureResponse: [
        {
          subsidyMeasureTitle: "Grant Assistance for the Historic Environment",
          scNumber: "SC10029",
          startDate: "2014-01-01",
          endDate: "2024-01-01",
          duration: "10 years 2 days ",
          budget: "300000000",
          gaName: "North East Combined Authority",
          lastModifiedDate: "06 January 2021",
        },
        {
          subsidyMeasureTitle: "AHDB Generic Promotional Measures scheme",
          scNumber: "SC10000",
          startDate: "2015-04-01",
          endDate: "2021-03-31",
          duration: "6 years 1 day ",
          budget: "120000000",
          gaName: "Welsh assembly government",
          lastModifiedDate: "04 January 2021",
        },
        {
          subsidyMeasureTitle: "AHDB Promotional Measures scheme",
          scNumber: "SC10001",
          startDate: "2014-10-23",
          endDate: "2021-03-31",
          duration: "6 years 5 months 3 weeks ",
          budget: "180000000",
          gaName: "Scottish Government",
          lastModifiedDate: "04 January 2021",
        },
        {
          subsidyMeasureTitle: "Aid for economic development - Growth Deal",
          scNumber: "SC10002",
          startDate: "2015-04-01",
          endDate: "2021-03-31",
          duration: "6 years 1 day ",
          budget: "64000000",
          gaName: "Northern Ireland",
          lastModifiedDate: "04 January 2021",
        },
        {
          subsidyMeasureTitle: "Aid for economic development - Growth Deal",
          scNumber: "SC10003",
          startDate: "2015-04-01",
          endDate: "2021-03-31",
          duration: "6 years 1 day ",
          budget: "64000000",
          gaName: "HMRC",
          lastModifiedDate: "04 January 2021",
        },
      ],
      grantingAuthorityResponse: [
        {
          gaId: 2,
          gaName: "Scottish Government",
          status: "DRAFT",
          lastModifiedDate: "04 January 2021",
        },
        {
          gaId: 3,
          gaName: "Northern Ireland",
          status: "DRAFT",
          lastModifiedDate: "04 January 2021",
        },
        {
          gaId: 4,
          gaName: "HMRC",
          status: "DRAFT",
          lastModifiedDate: "04 January 2021",
        },
        {
          gaId: 5,
          gaName: "DEFRA",
          status: "DRAFT",
          lastModifiedDate: "04 January 2021",
        },
        {
          gaId: 1,
          gaName: "Welsh assembly government",
          status: "DRAFT",
          lastModifiedDate: "04 January 2021",
        },
      ],
    },
  });

  global.dashboardawards = {
    grantingAuthorityUserActionCount: {
      totalGrantingAuthority: 67,
      totalActiveGA: 0,
      totalDeactiveGA: 0,
    },
    awardUserActionCount: {
      totalAwaitingAward: 264,
      totalDraftAward: 0,
      totalSubsidyAward: 283,
      totalPublishedAward: 9,
      totalDeletedAward: 0,
    },
    subsidyMeasureUserActionCount: {
      totalPublishedSubsidyMeasures: 0,
      totalDraftSubsidyMeasures: 114,
      totalSubsidyMeasures: 114,
      totalAwaitingSubsidyMeasures: 0,
      totalDeletedSubsidyMeasures: 0,
    },
    awardResponse: [
      {
        awardNumber: 225,
        subsidyFullAmountExact: "600,000",
        subsidyFullAmountRange: "£NA",
        subsidyObjective: "Employment",
        subsidyMeasureTitle: "Young Audiences Content Fund",
        status: "Rejected",
        gaName: "The Foundation for Social Entrepreneurs (T/A UnLtd)",
        lastModifiedDate: "12 January 2021",
        scNumber: "SC10112",
        subsidyInstrument: "Equity",
        beneficiaryName: "BEST MARIGOLD FILMS LIMITED",
      },
      {
        awardNumber: 224,
        subsidyFullAmountExact: "400,000",
        subsidyFullAmountRange: "£NA",
        subsidyObjective: "Training",
        subsidyMeasureTitle: "Woodland Carbon Fund",
        status: "Published",
        gaName: "Key Funds Investments Limited",
        lastModifiedDate: "12 January 2021",
        scNumber: "SC10111",
        subsidyInstrument: "Loan",
        beneficiaryName: "STREET CAT BOB FILM LIMITED",
      },
      {
        awardNumber: 218,
        subsidyFullAmountExact: "800,000",
        subsidyFullAmountRange: "£NA",
        subsidyObjective: "Research and development",
        subsidyMeasureTitle: "Walney Offshore Wind Farm",
        status: "Rejected",
        gaName: "The National Lottery Heritage Fund",
        lastModifiedDate: "12 January 2021",
        scNumber: "SC10104",
        subsidyInstrument: "Guarantee",
        beneficiaryName: "ANOTHER MOTHERS SON LTD",
      },
      {
        awardNumber: 220,
        subsidyFullAmountExact: "1,000,000",
        subsidyFullAmountRange: "£NA",
        subsidyObjective: "Energy efficiency",
        subsidyMeasureTitle: "Waterborne Freight Grant",
        status: "Rejected",
        gaName: "WM5G",
        lastModifiedDate: "12 January 2021",
        scNumber: "SC10106",
        subsidyInstrument: "Provision of goods or services below market prices",
        beneficiaryName: "Thalamus Health Ltd",
      },
      {
        awardNumber: 718,
        subsidyFullAmountExact: "0",
        subsidyFullAmountRange: "£30,000,001",
        subsidyObjective: "Research and development",
        subsidyMeasureTitle: "AHDB Generic Promotional Measures scheme",
        status: "Published",
        gaName: "HMRC",
        lastModifiedDate: "12 January 2021",
        scNumber: "SC10000",
        subsidyInstrument: "Loan",
        beneficiaryName: "DS SMITH PAPER LIMITED 100",
      },
    ],
    subsidyMeasureResponse: [
      {
        subsidyMeasureTitle: "Grant Assistance for the Historic Environment",
        scNumber: "SC10029",
        startDate: "2014-01-01",
        endDate: "2024-01-01",
        duration: "10 years 2 days ",
        budget: "300000000",
        gaName: "North East Combined Authority",
        lastModifiedDate: "06 January 2021",
      },
      {
        subsidyMeasureTitle: "AHDB Generic Promotional Measures scheme",
        scNumber: "SC10000",
        startDate: "2015-04-01",
        endDate: "2021-03-31",
        duration: "6 years 1 day ",
        budget: "120000000",
        gaName: "Welsh assembly government",
        lastModifiedDate: "04 January 2021",
      },
      {
        subsidyMeasureTitle: "AHDB Promotional Measures scheme",
        scNumber: "SC10001",
        startDate: "2014-10-23",
        endDate: "2021-03-31",
        duration: "6 years 5 months 3 weeks ",
        budget: "180000000",
        gaName: "Scottish Government",
        lastModifiedDate: "04 January 2021",
      },
      {
        subsidyMeasureTitle: "Aid for economic development - Growth Deal",
        scNumber: "SC10002",
        startDate: "2015-04-01",
        endDate: "2021-03-31",
        duration: "6 years 1 day ",
        budget: "64000000",
        gaName: "Northern Ireland",
        lastModifiedDate: "04 January 2021",
      },
      {
        subsidyMeasureTitle: "Aid for economic development - Growth Deal",
        scNumber: "SC10003",
        startDate: "2015-04-01",
        endDate: "2021-03-31",
        duration: "6 years 1 day ",
        budget: "64000000",
        gaName: "HMRC",
        lastModifiedDate: "04 January 2021",
      },
    ],
    grantingAuthorityResponse: [
      {
        gaId: 2,
        gaName: "Scottish Government",
        status: "DRAFT",
        lastModifiedDate: "04 January 2021",
      },
      {
        gaId: 3,
        gaName: "Northern Ireland",
        status: "DRAFT",
        lastModifiedDate: "04 January 2021",
      },
      {
        gaId: 4,
        gaName: "HMRC",
        status: "DRAFT",
        lastModifiedDate: "04 January 2021",
      },
      {
        gaId: 5,
        gaName: "DEFRA",
        status: "DRAFT",
        lastModifiedDate: "04 January 2021",
      },
      {
        gaId: 1,
        gaName: "Welsh assembly government",
        status: "DRAFT",
        lastModifiedDate: "04 January 2021",
      },
    ],
  };
  // global.process = {
  //   argv: ["", "", "env=dev"],
  // };
  global.process.argv = ["", "", "env=dev"];
  global.beis_url_accessmanagement =
    "https://dev-beis-tp-db-accessmanagement-service-app.azurewebsites.net";
  const req = mockRequest();

  const res = {};
  request(app)
    .post("/choosedashboard", (req, res))
    .send({
      dashboard_username: "Andrew Davis",
      dashboard_roles: "Granting Authority Approver",
      dashboard_GA: "",
    })
    .expect(200, done);
  // expect(abcd).toBe(200);
});

test("Unit testing for Choose Dashboard Encoder Test for POST call", (done) => {
  axios.get.mockResolvedValue({
    status: 200,
    data: {
      grantingAuthorityUserActionCount: {
        totalGrantingAuthority: 67,
        totalActiveGA: 0,
        totalDeactiveGA: 0,
      },
      awardUserActionCount: {
        totalAwaitingAward: 264,
        totalDraftAward: 0,
        totalSubsidyAward: 283,
        totalPublishedAward: 9,
        totalDeletedAward: 0,
      },
      subsidyMeasureUserActionCount: {
        totalPublishedSubsidyMeasures: 0,
        totalDraftSubsidyMeasures: 114,
        totalSubsidyMeasures: 114,
        totalAwaitingSubsidyMeasures: 0,
        totalDeletedSubsidyMeasures: 0,
      },
      awardResponse: [
        {
          awardNumber: 225,
          subsidyFullAmountExact: "600,000",
          subsidyFullAmountRange: "£NA",
          subsidyObjective: "Employment",
          subsidyMeasureTitle: "Young Audiences Content Fund",
          status: "Rejected",
          gaName: "The Foundation for Social Entrepreneurs (T/A UnLtd)",
          lastModifiedDate: "12 January 2021",
          scNumber: "SC10112",
          subsidyInstrument: "Equity",
          beneficiaryName: "BEST MARIGOLD FILMS LIMITED",
        },
        {
          awardNumber: 224,
          subsidyFullAmountExact: "400,000",
          subsidyFullAmountRange: "£NA",
          subsidyObjective: "Training",
          subsidyMeasureTitle: "Woodland Carbon Fund",
          status: "Published",
          gaName: "Key Funds Investments Limited",
          lastModifiedDate: "12 January 2021",
          scNumber: "SC10111",
          subsidyInstrument: "Loan",
          beneficiaryName: "STREET CAT BOB FILM LIMITED",
        },
        {
          awardNumber: 218,
          subsidyFullAmountExact: "800,000",
          subsidyFullAmountRange: "£NA",
          subsidyObjective: "Research and development",
          subsidyMeasureTitle: "Walney Offshore Wind Farm",
          status: "Rejected",
          gaName: "The National Lottery Heritage Fund",
          lastModifiedDate: "12 January 2021",
          scNumber: "SC10104",
          subsidyInstrument: "Guarantee",
          beneficiaryName: "ANOTHER MOTHERS SON LTD",
        },
        {
          awardNumber: 220,
          subsidyFullAmountExact: "1,000,000",
          subsidyFullAmountRange: "£NA",
          subsidyObjective: "Energy efficiency",
          subsidyMeasureTitle: "Waterborne Freight Grant",
          status: "Rejected",
          gaName: "WM5G",
          lastModifiedDate: "12 January 2021",
          scNumber: "SC10106",
          subsidyInstrument:
            "Provision of goods or services below market prices",
          beneficiaryName: "Thalamus Health Ltd",
        },
        {
          awardNumber: 718,
          subsidyFullAmountExact: "0",
          subsidyFullAmountRange: "£30,000,001",
          subsidyObjective: "Research and development",
          subsidyMeasureTitle: "AHDB Generic Promotional Measures scheme",
          status: "Published",
          gaName: "HMRC",
          lastModifiedDate: "12 January 2021",
          scNumber: "SC10000",
          subsidyInstrument: "Loan",
          beneficiaryName: "DS SMITH PAPER LIMITED 100",
        },
      ],
      subsidyMeasureResponse: [
        {
          subsidyMeasureTitle: "Grant Assistance for the Historic Environment",
          scNumber: "SC10029",
          startDate: "2014-01-01",
          endDate: "2024-01-01",
          duration: "10 years 2 days ",
          budget: "300000000",
          gaName: "North East Combined Authority",
          lastModifiedDate: "06 January 2021",
        },
        {
          subsidyMeasureTitle: "AHDB Generic Promotional Measures scheme",
          scNumber: "SC10000",
          startDate: "2015-04-01",
          endDate: "2021-03-31",
          duration: "6 years 1 day ",
          budget: "120000000",
          gaName: "Welsh assembly government",
          lastModifiedDate: "04 January 2021",
        },
        {
          subsidyMeasureTitle: "AHDB Promotional Measures scheme",
          scNumber: "SC10001",
          startDate: "2014-10-23",
          endDate: "2021-03-31",
          duration: "6 years 5 months 3 weeks ",
          budget: "180000000",
          gaName: "Scottish Government",
          lastModifiedDate: "04 January 2021",
        },
        {
          subsidyMeasureTitle: "Aid for economic development - Growth Deal",
          scNumber: "SC10002",
          startDate: "2015-04-01",
          endDate: "2021-03-31",
          duration: "6 years 1 day ",
          budget: "64000000",
          gaName: "Northern Ireland",
          lastModifiedDate: "04 January 2021",
        },
        {
          subsidyMeasureTitle: "Aid for economic development - Growth Deal",
          scNumber: "SC10003",
          startDate: "2015-04-01",
          endDate: "2021-03-31",
          duration: "6 years 1 day ",
          budget: "64000000",
          gaName: "HMRC",
          lastModifiedDate: "04 January 2021",
        },
      ],
      grantingAuthorityResponse: [
        {
          gaId: 2,
          gaName: "Scottish Government",
          status: "DRAFT",
          lastModifiedDate: "04 January 2021",
        },
        {
          gaId: 3,
          gaName: "Northern Ireland",
          status: "DRAFT",
          lastModifiedDate: "04 January 2021",
        },
        {
          gaId: 4,
          gaName: "HMRC",
          status: "DRAFT",
          lastModifiedDate: "04 January 2021",
        },
        {
          gaId: 5,
          gaName: "DEFRA",
          status: "DRAFT",
          lastModifiedDate: "04 January 2021",
        },
        {
          gaId: 1,
          gaName: "Welsh assembly government",
          status: "DRAFT",
          lastModifiedDate: "04 January 2021",
        },
      ],
    },
  });

  global.dashboardawards = {
    grantingAuthorityUserActionCount: {
      totalGrantingAuthority: 67,
      totalActiveGA: 0,
      totalDeactiveGA: 0,
    },
    awardUserActionCount: {
      totalAwaitingAward: 264,
      totalDraftAward: 0,
      totalSubsidyAward: 283,
      totalPublishedAward: 9,
      totalDeletedAward: 0,
    },
    subsidyMeasureUserActionCount: {
      totalPublishedSubsidyMeasures: 0,
      totalDraftSubsidyMeasures: 114,
      totalSubsidyMeasures: 114,
      totalAwaitingSubsidyMeasures: 0,
      totalDeletedSubsidyMeasures: 0,
    },
    awardResponse: [
      {
        awardNumber: 225,
        subsidyFullAmountExact: "600,000",
        subsidyFullAmountRange: "£NA",
        subsidyObjective: "Employment",
        subsidyMeasureTitle: "Young Audiences Content Fund",
        status: "Rejected",
        gaName: "The Foundation for Social Entrepreneurs (T/A UnLtd)",
        lastModifiedDate: "12 January 2021",
        scNumber: "SC10112",
        subsidyInstrument: "Equity",
        beneficiaryName: "BEST MARIGOLD FILMS LIMITED",
      },
      {
        awardNumber: 224,
        subsidyFullAmountExact: "400,000",
        subsidyFullAmountRange: "£NA",
        subsidyObjective: "Training",
        subsidyMeasureTitle: "Woodland Carbon Fund",
        status: "Published",
        gaName: "Key Funds Investments Limited",
        lastModifiedDate: "12 January 2021",
        scNumber: "SC10111",
        subsidyInstrument: "Loan",
        beneficiaryName: "STREET CAT BOB FILM LIMITED",
      },
      {
        awardNumber: 218,
        subsidyFullAmountExact: "800,000",
        subsidyFullAmountRange: "£NA",
        subsidyObjective: "Research and development",
        subsidyMeasureTitle: "Walney Offshore Wind Farm",
        status: "Rejected",
        gaName: "The National Lottery Heritage Fund",
        lastModifiedDate: "12 January 2021",
        scNumber: "SC10104",
        subsidyInstrument: "Guarantee",
        beneficiaryName: "ANOTHER MOTHERS SON LTD",
      },
      {
        awardNumber: 220,
        subsidyFullAmountExact: "1,000,000",
        subsidyFullAmountRange: "£NA",
        subsidyObjective: "Energy efficiency",
        subsidyMeasureTitle: "Waterborne Freight Grant",
        status: "Rejected",
        gaName: "WM5G",
        lastModifiedDate: "12 January 2021",
        scNumber: "SC10106",
        subsidyInstrument: "Provision of goods or services below market prices",
        beneficiaryName: "Thalamus Health Ltd",
      },
      {
        awardNumber: 718,
        subsidyFullAmountExact: "0",
        subsidyFullAmountRange: "£30,000,001",
        subsidyObjective: "Research and development",
        subsidyMeasureTitle: "AHDB Generic Promotional Measures scheme",
        status: "Published",
        gaName: "HMRC",
        lastModifiedDate: "12 January 2021",
        scNumber: "SC10000",
        subsidyInstrument: "Loan",
        beneficiaryName: "DS SMITH PAPER LIMITED 100",
      },
    ],
    subsidyMeasureResponse: [
      {
        subsidyMeasureTitle: "Grant Assistance for the Historic Environment",
        scNumber: "SC10029",
        startDate: "2014-01-01",
        endDate: "2024-01-01",
        duration: "10 years 2 days ",
        budget: "300000000",
        gaName: "North East Combined Authority",
        lastModifiedDate: "06 January 2021",
      },
      {
        subsidyMeasureTitle: "AHDB Generic Promotional Measures scheme",
        scNumber: "SC10000",
        startDate: "2015-04-01",
        endDate: "2021-03-31",
        duration: "6 years 1 day ",
        budget: "120000000",
        gaName: "Welsh assembly government",
        lastModifiedDate: "04 January 2021",
      },
      {
        subsidyMeasureTitle: "AHDB Promotional Measures scheme",
        scNumber: "SC10001",
        startDate: "2014-10-23",
        endDate: "2021-03-31",
        duration: "6 years 5 months 3 weeks ",
        budget: "180000000",
        gaName: "Scottish Government",
        lastModifiedDate: "04 January 2021",
      },
      {
        subsidyMeasureTitle: "Aid for economic development - Growth Deal",
        scNumber: "SC10002",
        startDate: "2015-04-01",
        endDate: "2021-03-31",
        duration: "6 years 1 day ",
        budget: "64000000",
        gaName: "Northern Ireland",
        lastModifiedDate: "04 January 2021",
      },
      {
        subsidyMeasureTitle: "Aid for economic development - Growth Deal",
        scNumber: "SC10003",
        startDate: "2015-04-01",
        endDate: "2021-03-31",
        duration: "6 years 1 day ",
        budget: "64000000",
        gaName: "HMRC",
        lastModifiedDate: "04 January 2021",
      },
    ],
    grantingAuthorityResponse: [
      {
        gaId: 2,
        gaName: "Scottish Government",
        status: "DRAFT",
        lastModifiedDate: "04 January 2021",
      },
      {
        gaId: 3,
        gaName: "Northern Ireland",
        status: "DRAFT",
        lastModifiedDate: "04 January 2021",
      },
      {
        gaId: 4,
        gaName: "HMRC",
        status: "DRAFT",
        lastModifiedDate: "04 January 2021",
      },
      {
        gaId: 5,
        gaName: "DEFRA",
        status: "DRAFT",
        lastModifiedDate: "04 January 2021",
      },
      {
        gaId: 1,
        gaName: "Welsh assembly government",
        status: "DRAFT",
        lastModifiedDate: "04 January 2021",
      },
    ],
  };
  // global.process = {
  //   argv: ["", "", "env=dev"],
  // };
  global.process.argv = ["", "", "env=dev"];
  global.beis_url_accessmanagement =
    "https://dev-beis-tp-db-accessmanagement-service-app.azurewebsites.net";
  const req = mockRequest();

  const res = {};
  request(app)
    .post("/choosedashboard", (req, res))
    .send({
      dashboard_username: "Andrew Davis",
      dashboard_roles: "Granting Authority Encoder",
      dashboard_GA: "",
    })
    .expect(200, done);
  // expect(abcd).toBe(200);
});

test("Unit testing for Choose Dashboard GA Admin Test for POST call", (done) => {
  axios.get.mockResolvedValue({
    status: 200,
    data: {
      grantingAuthorityUserActionCount: {
        totalGrantingAuthority: 67,
        totalActiveGA: 0,
        totalDeactiveGA: 0,
      },
      awardUserActionCount: {
        totalAwaitingAward: 264,
        totalDraftAward: 0,
        totalSubsidyAward: 283,
        totalPublishedAward: 9,
        totalDeletedAward: 0,
      },
      subsidyMeasureUserActionCount: {
        totalPublishedSubsidyMeasures: 0,
        totalDraftSubsidyMeasures: 114,
        totalSubsidyMeasures: 114,
        totalAwaitingSubsidyMeasures: 0,
        totalDeletedSubsidyMeasures: 0,
      },
      awardResponse: [
        {
          awardNumber: 225,
          subsidyFullAmountExact: "600,000",
          subsidyFullAmountRange: "£NA",
          subsidyObjective: "Employment",
          subsidyMeasureTitle: "Young Audiences Content Fund",
          status: "Rejected",
          gaName: "The Foundation for Social Entrepreneurs (T/A UnLtd)",
          lastModifiedDate: "12 January 2021",
          scNumber: "SC10112",
          subsidyInstrument: "Equity",
          beneficiaryName: "BEST MARIGOLD FILMS LIMITED",
        },
        {
          awardNumber: 224,
          subsidyFullAmountExact: "400,000",
          subsidyFullAmountRange: "£NA",
          subsidyObjective: "Training",
          subsidyMeasureTitle: "Woodland Carbon Fund",
          status: "Published",
          gaName: "Key Funds Investments Limited",
          lastModifiedDate: "12 January 2021",
          scNumber: "SC10111",
          subsidyInstrument: "Loan",
          beneficiaryName: "STREET CAT BOB FILM LIMITED",
        },
        {
          awardNumber: 218,
          subsidyFullAmountExact: "800,000",
          subsidyFullAmountRange: "£NA",
          subsidyObjective: "Research and development",
          subsidyMeasureTitle: "Walney Offshore Wind Farm",
          status: "Rejected",
          gaName: "The National Lottery Heritage Fund",
          lastModifiedDate: "12 January 2021",
          scNumber: "SC10104",
          subsidyInstrument: "Guarantee",
          beneficiaryName: "ANOTHER MOTHERS SON LTD",
        },
        {
          awardNumber: 220,
          subsidyFullAmountExact: "1,000,000",
          subsidyFullAmountRange: "£NA",
          subsidyObjective: "Energy efficiency",
          subsidyMeasureTitle: "Waterborne Freight Grant",
          status: "Rejected",
          gaName: "WM5G",
          lastModifiedDate: "12 January 2021",
          scNumber: "SC10106",
          subsidyInstrument:
            "Provision of goods or services below market prices",
          beneficiaryName: "Thalamus Health Ltd",
        },
        {
          awardNumber: 718,
          subsidyFullAmountExact: "0",
          subsidyFullAmountRange: "£30,000,001",
          subsidyObjective: "Research and development",
          subsidyMeasureTitle: "AHDB Generic Promotional Measures scheme",
          status: "Published",
          gaName: "HMRC",
          lastModifiedDate: "12 January 2021",
          scNumber: "SC10000",
          subsidyInstrument: "Loan",
          beneficiaryName: "DS SMITH PAPER LIMITED 100",
        },
      ],
      subsidyMeasureResponse: [
        {
          subsidyMeasureTitle: "Grant Assistance for the Historic Environment",
          scNumber: "SC10029",
          startDate: "2014-01-01",
          endDate: "2024-01-01",
          duration: "10 years 2 days ",
          budget: "300000000",
          gaName: "North East Combined Authority",
          lastModifiedDate: "06 January 2021",
        },
        {
          subsidyMeasureTitle: "AHDB Generic Promotional Measures scheme",
          scNumber: "SC10000",
          startDate: "2015-04-01",
          endDate: "2021-03-31",
          duration: "6 years 1 day ",
          budget: "120000000",
          gaName: "Welsh assembly government",
          lastModifiedDate: "04 January 2021",
        },
        {
          subsidyMeasureTitle: "AHDB Promotional Measures scheme",
          scNumber: "SC10001",
          startDate: "2014-10-23",
          endDate: "2021-03-31",
          duration: "6 years 5 months 3 weeks ",
          budget: "180000000",
          gaName: "Scottish Government",
          lastModifiedDate: "04 January 2021",
        },
        {
          subsidyMeasureTitle: "Aid for economic development - Growth Deal",
          scNumber: "SC10002",
          startDate: "2015-04-01",
          endDate: "2021-03-31",
          duration: "6 years 1 day ",
          budget: "64000000",
          gaName: "Northern Ireland",
          lastModifiedDate: "04 January 2021",
        },
        {
          subsidyMeasureTitle: "Aid for economic development - Growth Deal",
          scNumber: "SC10003",
          startDate: "2015-04-01",
          endDate: "2021-03-31",
          duration: "6 years 1 day ",
          budget: "64000000",
          gaName: "HMRC",
          lastModifiedDate: "04 January 2021",
        },
      ],
      grantingAuthorityResponse: [
        {
          gaId: 2,
          gaName: "Scottish Government",
          status: "DRAFT",
          lastModifiedDate: "04 January 2021",
        },
        {
          gaId: 3,
          gaName: "Northern Ireland",
          status: "DRAFT",
          lastModifiedDate: "04 January 2021",
        },
        {
          gaId: 4,
          gaName: "HMRC",
          status: "DRAFT",
          lastModifiedDate: "04 January 2021",
        },
        {
          gaId: 5,
          gaName: "DEFRA",
          status: "DRAFT",
          lastModifiedDate: "04 January 2021",
        },
        {
          gaId: 1,
          gaName: "Welsh assembly government",
          status: "DRAFT",
          lastModifiedDate: "04 January 2021",
        },
      ],
    },
  });

  global.dashboardawards = {
    grantingAuthorityUserActionCount: {
      totalGrantingAuthority: 67,
      totalActiveGA: 0,
      totalDeactiveGA: 0,
    },
    awardUserActionCount: {
      totalAwaitingAward: 264,
      totalDraftAward: 0,
      totalSubsidyAward: 283,
      totalPublishedAward: 9,
      totalDeletedAward: 0,
    },
    subsidyMeasureUserActionCount: {
      totalPublishedSubsidyMeasures: 0,
      totalDraftSubsidyMeasures: 114,
      totalSubsidyMeasures: 114,
      totalAwaitingSubsidyMeasures: 0,
      totalDeletedSubsidyMeasures: 0,
    },
    awardResponse: [
      {
        awardNumber: 225,
        subsidyFullAmountExact: "600,000",
        subsidyFullAmountRange: "£NA",
        subsidyObjective: "Employment",
        subsidyMeasureTitle: "Young Audiences Content Fund",
        status: "Rejected",
        gaName: "The Foundation for Social Entrepreneurs (T/A UnLtd)",
        lastModifiedDate: "12 January 2021",
        scNumber: "SC10112",
        subsidyInstrument: "Equity",
        beneficiaryName: "BEST MARIGOLD FILMS LIMITED",
      },
      {
        awardNumber: 224,
        subsidyFullAmountExact: "400,000",
        subsidyFullAmountRange: "£NA",
        subsidyObjective: "Training",
        subsidyMeasureTitle: "Woodland Carbon Fund",
        status: "Published",
        gaName: "Key Funds Investments Limited",
        lastModifiedDate: "12 January 2021",
        scNumber: "SC10111",
        subsidyInstrument: "Loan",
        beneficiaryName: "STREET CAT BOB FILM LIMITED",
      },
      {
        awardNumber: 218,
        subsidyFullAmountExact: "800,000",
        subsidyFullAmountRange: "£NA",
        subsidyObjective: "Research and development",
        subsidyMeasureTitle: "Walney Offshore Wind Farm",
        status: "Rejected",
        gaName: "The National Lottery Heritage Fund",
        lastModifiedDate: "12 January 2021",
        scNumber: "SC10104",
        subsidyInstrument: "Guarantee",
        beneficiaryName: "ANOTHER MOTHERS SON LTD",
      },
      {
        awardNumber: 220,
        subsidyFullAmountExact: "1,000,000",
        subsidyFullAmountRange: "£NA",
        subsidyObjective: "Energy efficiency",
        subsidyMeasureTitle: "Waterborne Freight Grant",
        status: "Rejected",
        gaName: "WM5G",
        lastModifiedDate: "12 January 2021",
        scNumber: "SC10106",
        subsidyInstrument: "Provision of goods or services below market prices",
        beneficiaryName: "Thalamus Health Ltd",
      },
      {
        awardNumber: 718,
        subsidyFullAmountExact: "0",
        subsidyFullAmountRange: "£30,000,001",
        subsidyObjective: "Research and development",
        subsidyMeasureTitle: "AHDB Generic Promotional Measures scheme",
        status: "Published",
        gaName: "HMRC",
        lastModifiedDate: "12 January 2021",
        scNumber: "SC10000",
        subsidyInstrument: "Loan",
        beneficiaryName: "DS SMITH PAPER LIMITED 100",
      },
    ],
    subsidyMeasureResponse: [
      {
        subsidyMeasureTitle: "Grant Assistance for the Historic Environment",
        scNumber: "SC10029",
        startDate: "2014-01-01",
        endDate: "2024-01-01",
        duration: "10 years 2 days ",
        budget: "300000000",
        gaName: "North East Combined Authority",
        lastModifiedDate: "06 January 2021",
      },
      {
        subsidyMeasureTitle: "AHDB Generic Promotional Measures scheme",
        scNumber: "SC10000",
        startDate: "2015-04-01",
        endDate: "2021-03-31",
        duration: "6 years 1 day ",
        budget: "120000000",
        gaName: "Welsh assembly government",
        lastModifiedDate: "04 January 2021",
      },
      {
        subsidyMeasureTitle: "AHDB Promotional Measures scheme",
        scNumber: "SC10001",
        startDate: "2014-10-23",
        endDate: "2021-03-31",
        duration: "6 years 5 months 3 weeks ",
        budget: "180000000",
        gaName: "Scottish Government",
        lastModifiedDate: "04 January 2021",
      },
      {
        subsidyMeasureTitle: "Aid for economic development - Growth Deal",
        scNumber: "SC10002",
        startDate: "2015-04-01",
        endDate: "2021-03-31",
        duration: "6 years 1 day ",
        budget: "64000000",
        gaName: "Northern Ireland",
        lastModifiedDate: "04 January 2021",
      },
      {
        subsidyMeasureTitle: "Aid for economic development - Growth Deal",
        scNumber: "SC10003",
        startDate: "2015-04-01",
        endDate: "2021-03-31",
        duration: "6 years 1 day ",
        budget: "64000000",
        gaName: "HMRC",
        lastModifiedDate: "04 January 2021",
      },
    ],
    grantingAuthorityResponse: [
      {
        gaId: 2,
        gaName: "Scottish Government",
        status: "DRAFT",
        lastModifiedDate: "04 January 2021",
      },
      {
        gaId: 3,
        gaName: "Northern Ireland",
        status: "DRAFT",
        lastModifiedDate: "04 January 2021",
      },
      {
        gaId: 4,
        gaName: "HMRC",
        status: "DRAFT",
        lastModifiedDate: "04 January 2021",
      },
      {
        gaId: 5,
        gaName: "DEFRA",
        status: "DRAFT",
        lastModifiedDate: "04 January 2021",
      },
      {
        gaId: 1,
        gaName: "Welsh assembly government",
        status: "DRAFT",
        lastModifiedDate: "04 January 2021",
      },
    ],
  };
  // global.process = {
  //   argv: ["", "", "env=dev"],
  // };
  global.process.argv = ["", "", "env=dev"];
  global.beis_url_accessmanagement =
    "https://dev-beis-tp-db-accessmanagement-service-app.azurewebsites.net";
  const req = mockRequest();

  const res = {};
  request(app)
    .post("/choosedashboard", (req, res))
    .send({
      dashboard_username: "Andrew Davis",
      dashboard_roles: "Granting Authority Administrator",
      dashboard_GA: "",
    })
    .expect(200, done);
  // expect(abcd).toBe(200);
});

test("Unit testing for Choose Dashboard GA Approver Test for POST call", (done) => {
  axios.get.mockResolvedValue({
    status: 200,
    data: {
      grantingAuthorityUserActionCount: {
        totalGrantingAuthority: 67,
        totalActiveGA: 0,
        totalDeactiveGA: 0,
      },
      awardUserActionCount: {
        totalAwaitingAward: 264,
        totalDraftAward: 0,
        totalSubsidyAward: 283,
        totalPublishedAward: 9,
        totalDeletedAward: 0,
      },
      subsidyMeasureUserActionCount: {
        totalPublishedSubsidyMeasures: 0,
        totalDraftSubsidyMeasures: 114,
        totalSubsidyMeasures: 114,
        totalAwaitingSubsidyMeasures: 0,
        totalDeletedSubsidyMeasures: 0,
      },
      awardResponse: [
        {
          awardNumber: 225,
          subsidyFullAmountExact: "600,000",
          subsidyFullAmountRange: "£NA",
          subsidyObjective: "Employment",
          subsidyMeasureTitle: "Young Audiences Content Fund",
          status: "Rejected",
          gaName: "The Foundation for Social Entrepreneurs (T/A UnLtd)",
          lastModifiedDate: "12 January 2021",
          scNumber: "SC10112",
          subsidyInstrument: "Equity",
          beneficiaryName: "BEST MARIGOLD FILMS LIMITED",
        },
        {
          awardNumber: 224,
          subsidyFullAmountExact: "400,000",
          subsidyFullAmountRange: "£NA",
          subsidyObjective: "Training",
          subsidyMeasureTitle: "Woodland Carbon Fund",
          status: "Published",
          gaName: "Key Funds Investments Limited",
          lastModifiedDate: "12 January 2021",
          scNumber: "SC10111",
          subsidyInstrument: "Loan",
          beneficiaryName: "STREET CAT BOB FILM LIMITED",
        },
        {
          awardNumber: 218,
          subsidyFullAmountExact: "800,000",
          subsidyFullAmountRange: "£NA",
          subsidyObjective: "Research and development",
          subsidyMeasureTitle: "Walney Offshore Wind Farm",
          status: "Rejected",
          gaName: "The National Lottery Heritage Fund",
          lastModifiedDate: "12 January 2021",
          scNumber: "SC10104",
          subsidyInstrument: "Guarantee",
          beneficiaryName: "ANOTHER MOTHERS SON LTD",
        },
        {
          awardNumber: 220,
          subsidyFullAmountExact: "1,000,000",
          subsidyFullAmountRange: "£NA",
          subsidyObjective: "Energy efficiency",
          subsidyMeasureTitle: "Waterborne Freight Grant",
          status: "Rejected",
          gaName: "WM5G",
          lastModifiedDate: "12 January 2021",
          scNumber: "SC10106",
          subsidyInstrument:
            "Provision of goods or services below market prices",
          beneficiaryName: "Thalamus Health Ltd",
        },
        {
          awardNumber: 718,
          subsidyFullAmountExact: "0",
          subsidyFullAmountRange: "£30,000,001",
          subsidyObjective: "Research and development",
          subsidyMeasureTitle: "AHDB Generic Promotional Measures scheme",
          status: "Published",
          gaName: "HMRC",
          lastModifiedDate: "12 January 2021",
          scNumber: "SC10000",
          subsidyInstrument: "Loan",
          beneficiaryName: "DS SMITH PAPER LIMITED 100",
        },
      ],
      subsidyMeasureResponse: [
        {
          subsidyMeasureTitle: "Grant Assistance for the Historic Environment",
          scNumber: "SC10029",
          startDate: "2014-01-01",
          endDate: "2024-01-01",
          duration: "10 years 2 days ",
          budget: "300000000",
          gaName: "North East Combined Authority",
          lastModifiedDate: "06 January 2021",
        },
        {
          subsidyMeasureTitle: "AHDB Generic Promotional Measures scheme",
          scNumber: "SC10000",
          startDate: "2015-04-01",
          endDate: "2021-03-31",
          duration: "6 years 1 day ",
          budget: "120000000",
          gaName: "Welsh assembly government",
          lastModifiedDate: "04 January 2021",
        },
        {
          subsidyMeasureTitle: "AHDB Promotional Measures scheme",
          scNumber: "SC10001",
          startDate: "2014-10-23",
          endDate: "2021-03-31",
          duration: "6 years 5 months 3 weeks ",
          budget: "180000000",
          gaName: "Scottish Government",
          lastModifiedDate: "04 January 2021",
        },
        {
          subsidyMeasureTitle: "Aid for economic development - Growth Deal",
          scNumber: "SC10002",
          startDate: "2015-04-01",
          endDate: "2021-03-31",
          duration: "6 years 1 day ",
          budget: "64000000",
          gaName: "Northern Ireland",
          lastModifiedDate: "04 January 2021",
        },
        {
          subsidyMeasureTitle: "Aid for economic development - Growth Deal",
          scNumber: "SC10003",
          startDate: "2015-04-01",
          endDate: "2021-03-31",
          duration: "6 years 1 day ",
          budget: "64000000",
          gaName: "HMRC",
          lastModifiedDate: "04 January 2021",
        },
      ],
      grantingAuthorityResponse: [
        {
          gaId: 2,
          gaName: "Scottish Government",
          status: "DRAFT",
          lastModifiedDate: "04 January 2021",
        },
        {
          gaId: 3,
          gaName: "Northern Ireland",
          status: "DRAFT",
          lastModifiedDate: "04 January 2021",
        },
        {
          gaId: 4,
          gaName: "HMRC",
          status: "DRAFT",
          lastModifiedDate: "04 January 2021",
        },
        {
          gaId: 5,
          gaName: "DEFRA",
          status: "DRAFT",
          lastModifiedDate: "04 January 2021",
        },
        {
          gaId: 1,
          gaName: "Welsh assembly government",
          status: "DRAFT",
          lastModifiedDate: "04 January 2021",
        },
      ],
    },
  });

  global.dashboardawards = {
    grantingAuthorityUserActionCount: {
      totalGrantingAuthority: 67,
      totalActiveGA: 0,
      totalDeactiveGA: 0,
    },
    awardUserActionCount: {
      totalAwaitingAward: 264,
      totalDraftAward: 0,
      totalSubsidyAward: 283,
      totalPublishedAward: 9,
      totalDeletedAward: 0,
    },
    subsidyMeasureUserActionCount: {
      totalPublishedSubsidyMeasures: 0,
      totalDraftSubsidyMeasures: 114,
      totalSubsidyMeasures: 114,
      totalAwaitingSubsidyMeasures: 0,
      totalDeletedSubsidyMeasures: 0,
    },
    awardResponse: [
      {
        awardNumber: 225,
        subsidyFullAmountExact: "600,000",
        subsidyFullAmountRange: "£NA",
        subsidyObjective: "Employment",
        subsidyMeasureTitle: "Young Audiences Content Fund",
        status: "Rejected",
        gaName: "The Foundation for Social Entrepreneurs (T/A UnLtd)",
        lastModifiedDate: "12 January 2021",
        scNumber: "SC10112",
        subsidyInstrument: "Equity",
        beneficiaryName: "BEST MARIGOLD FILMS LIMITED",
      },
      {
        awardNumber: 224,
        subsidyFullAmountExact: "400,000",
        subsidyFullAmountRange: "£NA",
        subsidyObjective: "Training",
        subsidyMeasureTitle: "Woodland Carbon Fund",
        status: "Published",
        gaName: "Key Funds Investments Limited",
        lastModifiedDate: "12 January 2021",
        scNumber: "SC10111",
        subsidyInstrument: "Loan",
        beneficiaryName: "STREET CAT BOB FILM LIMITED",
      },
      {
        awardNumber: 218,
        subsidyFullAmountExact: "800,000",
        subsidyFullAmountRange: "£NA",
        subsidyObjective: "Research and development",
        subsidyMeasureTitle: "Walney Offshore Wind Farm",
        status: "Rejected",
        gaName: "The National Lottery Heritage Fund",
        lastModifiedDate: "12 January 2021",
        scNumber: "SC10104",
        subsidyInstrument: "Guarantee",
        beneficiaryName: "ANOTHER MOTHERS SON LTD",
      },
      {
        awardNumber: 220,
        subsidyFullAmountExact: "1,000,000",
        subsidyFullAmountRange: "£NA",
        subsidyObjective: "Energy efficiency",
        subsidyMeasureTitle: "Waterborne Freight Grant",
        status: "Rejected",
        gaName: "WM5G",
        lastModifiedDate: "12 January 2021",
        scNumber: "SC10106",
        subsidyInstrument: "Provision of goods or services below market prices",
        beneficiaryName: "Thalamus Health Ltd",
      },
      {
        awardNumber: 718,
        subsidyFullAmountExact: "0",
        subsidyFullAmountRange: "£30,000,001",
        subsidyObjective: "Research and development",
        subsidyMeasureTitle: "AHDB Generic Promotional Measures scheme",
        status: "Published",
        gaName: "HMRC",
        lastModifiedDate: "12 January 2021",
        scNumber: "SC10000",
        subsidyInstrument: "Loan",
        beneficiaryName: "DS SMITH PAPER LIMITED 100",
      },
    ],
    subsidyMeasureResponse: [
      {
        subsidyMeasureTitle: "Grant Assistance for the Historic Environment",
        scNumber: "SC10029",
        startDate: "2014-01-01",
        endDate: "2024-01-01",
        duration: "10 years 2 days ",
        budget: "300000000",
        gaName: "North East Combined Authority",
        lastModifiedDate: "06 January 2021",
      },
      {
        subsidyMeasureTitle: "AHDB Generic Promotional Measures scheme",
        scNumber: "SC10000",
        startDate: "2015-04-01",
        endDate: "2021-03-31",
        duration: "6 years 1 day ",
        budget: "120000000",
        gaName: "Welsh assembly government",
        lastModifiedDate: "04 January 2021",
      },
      {
        subsidyMeasureTitle: "AHDB Promotional Measures scheme",
        scNumber: "SC10001",
        startDate: "2014-10-23",
        endDate: "2021-03-31",
        duration: "6 years 5 months 3 weeks ",
        budget: "180000000",
        gaName: "Scottish Government",
        lastModifiedDate: "04 January 2021",
      },
      {
        subsidyMeasureTitle: "Aid for economic development - Growth Deal",
        scNumber: "SC10002",
        startDate: "2015-04-01",
        endDate: "2021-03-31",
        duration: "6 years 1 day ",
        budget: "64000000",
        gaName: "Northern Ireland",
        lastModifiedDate: "04 January 2021",
      },
      {
        subsidyMeasureTitle: "Aid for economic development - Growth Deal",
        scNumber: "SC10003",
        startDate: "2015-04-01",
        endDate: "2021-03-31",
        duration: "6 years 1 day ",
        budget: "64000000",
        gaName: "HMRC",
        lastModifiedDate: "04 January 2021",
      },
    ],
    grantingAuthorityResponse: [
      {
        gaId: 2,
        gaName: "Scottish Government",
        status: "DRAFT",
        lastModifiedDate: "04 January 2021",
      },
      {
        gaId: 3,
        gaName: "Northern Ireland",
        status: "DRAFT",
        lastModifiedDate: "04 January 2021",
      },
      {
        gaId: 4,
        gaName: "HMRC",
        status: "DRAFT",
        lastModifiedDate: "04 January 2021",
      },
      {
        gaId: 5,
        gaName: "DEFRA",
        status: "DRAFT",
        lastModifiedDate: "04 January 2021",
      },
      {
        gaId: 1,
        gaName: "Welsh assembly government",
        status: "DRAFT",
        lastModifiedDate: "04 January 2021",
      },
    ],
  };
  // global.process = {
  //   argv: ["", "", "env=dev"],
  // };
  global.process.argv = ["", "", "env=dev"];
  global.beis_url_accessmanagement =
    "https://dev-beis-tp-db-accessmanagement-service-app.azurewebsites.net";
  const req = mockRequest();

  const res = {};
  request(app)
    .post("/choosedashboard", (req, res))
    .send({
      dashboard_username: "Andrew Davis",
      dashboard_roles: "Granting Authority Approver",
      dashboard_GA: "",
    })
    .expect(200, done);
  // expect(abcd).toBe(200);
});

test("Unit testing for Choose Dashboard Encoder Test for POST call", (done) => {
  axios.get.mockResolvedValue({
    status: 200,
    data: {
      grantingAuthorityUserActionCount: {
        totalGrantingAuthority: 67,
        totalActiveGA: 0,
        totalDeactiveGA: 0,
      },
      awardUserActionCount: {
        totalAwaitingAward: 264,
        totalDraftAward: 0,
        totalSubsidyAward: 283,
        totalPublishedAward: 9,
        totalDeletedAward: 0,
      },
      subsidyMeasureUserActionCount: {
        totalPublishedSubsidyMeasures: 0,
        totalDraftSubsidyMeasures: 114,
        totalSubsidyMeasures: 114,
        totalAwaitingSubsidyMeasures: 0,
        totalDeletedSubsidyMeasures: 0,
      },
      awardResponse: [
        {
          awardNumber: 225,
          subsidyFullAmountExact: "600,000",
          subsidyFullAmountRange: "£NA",
          subsidyObjective: "Employment",
          subsidyMeasureTitle: "Young Audiences Content Fund",
          status: "Rejected",
          gaName: "The Foundation for Social Entrepreneurs (T/A UnLtd)",
          lastModifiedDate: "12 January 2021",
          scNumber: "SC10112",
          subsidyInstrument: "Equity",
          beneficiaryName: "BEST MARIGOLD FILMS LIMITED",
        },
        {
          awardNumber: 224,
          subsidyFullAmountExact: "400,000",
          subsidyFullAmountRange: "£NA",
          subsidyObjective: "Training",
          subsidyMeasureTitle: "Woodland Carbon Fund",
          status: "Published",
          gaName: "Key Funds Investments Limited",
          lastModifiedDate: "12 January 2021",
          scNumber: "SC10111",
          subsidyInstrument: "Loan",
          beneficiaryName: "STREET CAT BOB FILM LIMITED",
        },
        {
          awardNumber: 218,
          subsidyFullAmountExact: "800,000",
          subsidyFullAmountRange: "£NA",
          subsidyObjective: "Research and development",
          subsidyMeasureTitle: "Walney Offshore Wind Farm",
          status: "Rejected",
          gaName: "The National Lottery Heritage Fund",
          lastModifiedDate: "12 January 2021",
          scNumber: "SC10104",
          subsidyInstrument: "Guarantee",
          beneficiaryName: "ANOTHER MOTHERS SON LTD",
        },
        {
          awardNumber: 220,
          subsidyFullAmountExact: "1,000,000",
          subsidyFullAmountRange: "£NA",
          subsidyObjective: "Energy efficiency",
          subsidyMeasureTitle: "Waterborne Freight Grant",
          status: "Rejected",
          gaName: "WM5G",
          lastModifiedDate: "12 January 2021",
          scNumber: "SC10106",
          subsidyInstrument:
            "Provision of goods or services below market prices",
          beneficiaryName: "Thalamus Health Ltd",
        },
        {
          awardNumber: 718,
          subsidyFullAmountExact: "0",
          subsidyFullAmountRange: "£30,000,001",
          subsidyObjective: "Research and development",
          subsidyMeasureTitle: "AHDB Generic Promotional Measures scheme",
          status: "Published",
          gaName: "HMRC",
          lastModifiedDate: "12 January 2021",
          scNumber: "SC10000",
          subsidyInstrument: "Loan",
          beneficiaryName: "DS SMITH PAPER LIMITED 100",
        },
      ],
      subsidyMeasureResponse: [
        {
          subsidyMeasureTitle: "Grant Assistance for the Historic Environment",
          scNumber: "SC10029",
          startDate: "2014-01-01",
          endDate: "2024-01-01",
          duration: "10 years 2 days ",
          budget: "300000000",
          gaName: "North East Combined Authority",
          lastModifiedDate: "06 January 2021",
        },
        {
          subsidyMeasureTitle: "AHDB Generic Promotional Measures scheme",
          scNumber: "SC10000",
          startDate: "2015-04-01",
          endDate: "2021-03-31",
          duration: "6 years 1 day ",
          budget: "120000000",
          gaName: "Welsh assembly government",
          lastModifiedDate: "04 January 2021",
        },
        {
          subsidyMeasureTitle: "AHDB Promotional Measures scheme",
          scNumber: "SC10001",
          startDate: "2014-10-23",
          endDate: "2021-03-31",
          duration: "6 years 5 months 3 weeks ",
          budget: "180000000",
          gaName: "Scottish Government",
          lastModifiedDate: "04 January 2021",
        },
        {
          subsidyMeasureTitle: "Aid for economic development - Growth Deal",
          scNumber: "SC10002",
          startDate: "2015-04-01",
          endDate: "2021-03-31",
          duration: "6 years 1 day ",
          budget: "64000000",
          gaName: "Northern Ireland",
          lastModifiedDate: "04 January 2021",
        },
        {
          subsidyMeasureTitle: "Aid for economic development - Growth Deal",
          scNumber: "SC10003",
          startDate: "2015-04-01",
          endDate: "2021-03-31",
          duration: "6 years 1 day ",
          budget: "64000000",
          gaName: "HMRC",
          lastModifiedDate: "04 January 2021",
        },
      ],
      grantingAuthorityResponse: [
        {
          gaId: 2,
          gaName: "Scottish Government",
          status: "DRAFT",
          lastModifiedDate: "04 January 2021",
        },
        {
          gaId: 3,
          gaName: "Northern Ireland",
          status: "DRAFT",
          lastModifiedDate: "04 January 2021",
        },
        {
          gaId: 4,
          gaName: "HMRC",
          status: "DRAFT",
          lastModifiedDate: "04 January 2021",
        },
        {
          gaId: 5,
          gaName: "DEFRA",
          status: "DRAFT",
          lastModifiedDate: "04 January 2021",
        },
        {
          gaId: 1,
          gaName: "Welsh assembly government",
          status: "DRAFT",
          lastModifiedDate: "04 January 2021",
        },
      ],
    },
  });

  global.dashboardawards = {
    grantingAuthorityUserActionCount: {
      totalGrantingAuthority: 67,
      totalActiveGA: 0,
      totalDeactiveGA: 0,
    },
    awardUserActionCount: {
      totalAwaitingAward: 264,
      totalDraftAward: 0,
      totalSubsidyAward: 283,
      totalPublishedAward: 9,
      totalDeletedAward: 0,
    },
    subsidyMeasureUserActionCount: {
      totalPublishedSubsidyMeasures: 0,
      totalDraftSubsidyMeasures: 114,
      totalSubsidyMeasures: 114,
      totalAwaitingSubsidyMeasures: 0,
      totalDeletedSubsidyMeasures: 0,
    },
    awardResponse: [
      {
        awardNumber: 225,
        subsidyFullAmountExact: "600,000",
        subsidyFullAmountRange: "£NA",
        subsidyObjective: "Employment",
        subsidyMeasureTitle: "Young Audiences Content Fund",
        status: "Rejected",
        gaName: "The Foundation for Social Entrepreneurs (T/A UnLtd)",
        lastModifiedDate: "12 January 2021",
        scNumber: "SC10112",
        subsidyInstrument: "Equity",
        beneficiaryName: "BEST MARIGOLD FILMS LIMITED",
      },
      {
        awardNumber: 224,
        subsidyFullAmountExact: "400,000",
        subsidyFullAmountRange: "£NA",
        subsidyObjective: "Training",
        subsidyMeasureTitle: "Woodland Carbon Fund",
        status: "Published",
        gaName: "Key Funds Investments Limited",
        lastModifiedDate: "12 January 2021",
        scNumber: "SC10111",
        subsidyInstrument: "Loan",
        beneficiaryName: "STREET CAT BOB FILM LIMITED",
      },
      {
        awardNumber: 218,
        subsidyFullAmountExact: "800,000",
        subsidyFullAmountRange: "£NA",
        subsidyObjective: "Research and development",
        subsidyMeasureTitle: "Walney Offshore Wind Farm",
        status: "Rejected",
        gaName: "The National Lottery Heritage Fund",
        lastModifiedDate: "12 January 2021",
        scNumber: "SC10104",
        subsidyInstrument: "Guarantee",
        beneficiaryName: "ANOTHER MOTHERS SON LTD",
      },
      {
        awardNumber: 220,
        subsidyFullAmountExact: "1,000,000",
        subsidyFullAmountRange: "£NA",
        subsidyObjective: "Energy efficiency",
        subsidyMeasureTitle: "Waterborne Freight Grant",
        status: "Rejected",
        gaName: "WM5G",
        lastModifiedDate: "12 January 2021",
        scNumber: "SC10106",
        subsidyInstrument: "Provision of goods or services below market prices",
        beneficiaryName: "Thalamus Health Ltd",
      },
      {
        awardNumber: 718,
        subsidyFullAmountExact: "0",
        subsidyFullAmountRange: "£30,000,001",
        subsidyObjective: "Research and development",
        subsidyMeasureTitle: "AHDB Generic Promotional Measures scheme",
        status: "Published",
        gaName: "HMRC",
        lastModifiedDate: "12 January 2021",
        scNumber: "SC10000",
        subsidyInstrument: "Loan",
        beneficiaryName: "DS SMITH PAPER LIMITED 100",
      },
    ],
    subsidyMeasureResponse: [
      {
        subsidyMeasureTitle: "Grant Assistance for the Historic Environment",
        scNumber: "SC10029",
        startDate: "2014-01-01",
        endDate: "2024-01-01",
        duration: "10 years 2 days ",
        budget: "300000000",
        gaName: "North East Combined Authority",
        lastModifiedDate: "06 January 2021",
      },
      {
        subsidyMeasureTitle: "AHDB Generic Promotional Measures scheme",
        scNumber: "SC10000",
        startDate: "2015-04-01",
        endDate: "2021-03-31",
        duration: "6 years 1 day ",
        budget: "120000000",
        gaName: "Welsh assembly government",
        lastModifiedDate: "04 January 2021",
      },
      {
        subsidyMeasureTitle: "AHDB Promotional Measures scheme",
        scNumber: "SC10001",
        startDate: "2014-10-23",
        endDate: "2021-03-31",
        duration: "6 years 5 months 3 weeks ",
        budget: "180000000",
        gaName: "Scottish Government",
        lastModifiedDate: "04 January 2021",
      },
      {
        subsidyMeasureTitle: "Aid for economic development - Growth Deal",
        scNumber: "SC10002",
        startDate: "2015-04-01",
        endDate: "2021-03-31",
        duration: "6 years 1 day ",
        budget: "64000000",
        gaName: "Northern Ireland",
        lastModifiedDate: "04 January 2021",
      },
      {
        subsidyMeasureTitle: "Aid for economic development - Growth Deal",
        scNumber: "SC10003",
        startDate: "2015-04-01",
        endDate: "2021-03-31",
        duration: "6 years 1 day ",
        budget: "64000000",
        gaName: "HMRC",
        lastModifiedDate: "04 January 2021",
      },
    ],
    grantingAuthorityResponse: [
      {
        gaId: 2,
        gaName: "Scottish Government",
        status: "DRAFT",
        lastModifiedDate: "04 January 2021",
      },
      {
        gaId: 3,
        gaName: "Northern Ireland",
        status: "DRAFT",
        lastModifiedDate: "04 January 2021",
      },
      {
        gaId: 4,
        gaName: "HMRC",
        status: "DRAFT",
        lastModifiedDate: "04 January 2021",
      },
      {
        gaId: 5,
        gaName: "DEFRA",
        status: "DRAFT",
        lastModifiedDate: "04 January 2021",
      },
      {
        gaId: 1,
        gaName: "Welsh assembly government",
        status: "DRAFT",
        lastModifiedDate: "04 January 2021",
      },
    ],
  };
  // global.process = {
  //   argv: ["", "", "env=dev"],
  // };
  global.process.argv = ["", "", "env=integ"];
  global.beis_url_accessmanagement =
    "https://dev-beis-tp-db-accessmanagement-service-app.azurewebsites.net";
  const req = mockRequest();

  const res = {};
  request(app)
    .post("/choosedashboard", (req, res))
    .send({
      dashboard_username: "Andrew Davis",
      dashboard_roles: "Granting Authority Encoder",
      dashboard_GA: "",
    })
    .expect(200, done);
  // expect(abcd).toBe(200);
});

test("Unit testing for Choose Dashboard GA Admin Test for POST call", (done) => {
  axios.get.mockResolvedValue({
    status: 200,
    data: {
      grantingAuthorityUserActionCount: {
        totalGrantingAuthority: 67,
        totalActiveGA: 0,
        totalDeactiveGA: 0,
      },
      awardUserActionCount: {
        totalAwaitingAward: 264,
        totalDraftAward: 0,
        totalSubsidyAward: 283,
        totalPublishedAward: 9,
        totalDeletedAward: 0,
      },
      subsidyMeasureUserActionCount: {
        totalPublishedSubsidyMeasures: 0,
        totalDraftSubsidyMeasures: 114,
        totalSubsidyMeasures: 114,
        totalAwaitingSubsidyMeasures: 0,
        totalDeletedSubsidyMeasures: 0,
      },
      awardResponse: [
        {
          awardNumber: 225,
          subsidyFullAmountExact: "600,000",
          subsidyFullAmountRange: "£NA",
          subsidyObjective: "Employment",
          subsidyMeasureTitle: "Young Audiences Content Fund",
          status: "Rejected",
          gaName: "The Foundation for Social Entrepreneurs (T/A UnLtd)",
          lastModifiedDate: "12 January 2021",
          scNumber: "SC10112",
          subsidyInstrument: "Equity",
          beneficiaryName: "BEST MARIGOLD FILMS LIMITED",
        },
        {
          awardNumber: 224,
          subsidyFullAmountExact: "400,000",
          subsidyFullAmountRange: "£NA",
          subsidyObjective: "Training",
          subsidyMeasureTitle: "Woodland Carbon Fund",
          status: "Published",
          gaName: "Key Funds Investments Limited",
          lastModifiedDate: "12 January 2021",
          scNumber: "SC10111",
          subsidyInstrument: "Loan",
          beneficiaryName: "STREET CAT BOB FILM LIMITED",
        },
        {
          awardNumber: 218,
          subsidyFullAmountExact: "800,000",
          subsidyFullAmountRange: "£NA",
          subsidyObjective: "Research and development",
          subsidyMeasureTitle: "Walney Offshore Wind Farm",
          status: "Rejected",
          gaName: "The National Lottery Heritage Fund",
          lastModifiedDate: "12 January 2021",
          scNumber: "SC10104",
          subsidyInstrument: "Guarantee",
          beneficiaryName: "ANOTHER MOTHERS SON LTD",
        },
        {
          awardNumber: 220,
          subsidyFullAmountExact: "1,000,000",
          subsidyFullAmountRange: "£NA",
          subsidyObjective: "Energy efficiency",
          subsidyMeasureTitle: "Waterborne Freight Grant",
          status: "Rejected",
          gaName: "WM5G",
          lastModifiedDate: "12 January 2021",
          scNumber: "SC10106",
          subsidyInstrument:
            "Provision of goods or services below market prices",
          beneficiaryName: "Thalamus Health Ltd",
        },
        {
          awardNumber: 718,
          subsidyFullAmountExact: "0",
          subsidyFullAmountRange: "£30,000,001",
          subsidyObjective: "Research and development",
          subsidyMeasureTitle: "AHDB Generic Promotional Measures scheme",
          status: "Published",
          gaName: "HMRC",
          lastModifiedDate: "12 January 2021",
          scNumber: "SC10000",
          subsidyInstrument: "Loan",
          beneficiaryName: "DS SMITH PAPER LIMITED 100",
        },
      ],
      subsidyMeasureResponse: [
        {
          subsidyMeasureTitle: "Grant Assistance for the Historic Environment",
          scNumber: "SC10029",
          startDate: "2014-01-01",
          endDate: "2024-01-01",
          duration: "10 years 2 days ",
          budget: "300000000",
          gaName: "North East Combined Authority",
          lastModifiedDate: "06 January 2021",
        },
        {
          subsidyMeasureTitle: "AHDB Generic Promotional Measures scheme",
          scNumber: "SC10000",
          startDate: "2015-04-01",
          endDate: "2021-03-31",
          duration: "6 years 1 day ",
          budget: "120000000",
          gaName: "Welsh assembly government",
          lastModifiedDate: "04 January 2021",
        },
        {
          subsidyMeasureTitle: "AHDB Promotional Measures scheme",
          scNumber: "SC10001",
          startDate: "2014-10-23",
          endDate: "2021-03-31",
          duration: "6 years 5 months 3 weeks ",
          budget: "180000000",
          gaName: "Scottish Government",
          lastModifiedDate: "04 January 2021",
        },
        {
          subsidyMeasureTitle: "Aid for economic development - Growth Deal",
          scNumber: "SC10002",
          startDate: "2015-04-01",
          endDate: "2021-03-31",
          duration: "6 years 1 day ",
          budget: "64000000",
          gaName: "Northern Ireland",
          lastModifiedDate: "04 January 2021",
        },
        {
          subsidyMeasureTitle: "Aid for economic development - Growth Deal",
          scNumber: "SC10003",
          startDate: "2015-04-01",
          endDate: "2021-03-31",
          duration: "6 years 1 day ",
          budget: "64000000",
          gaName: "HMRC",
          lastModifiedDate: "04 January 2021",
        },
      ],
      grantingAuthorityResponse: [
        {
          gaId: 2,
          gaName: "Scottish Government",
          status: "DRAFT",
          lastModifiedDate: "04 January 2021",
        },
        {
          gaId: 3,
          gaName: "Northern Ireland",
          status: "DRAFT",
          lastModifiedDate: "04 January 2021",
        },
        {
          gaId: 4,
          gaName: "HMRC",
          status: "DRAFT",
          lastModifiedDate: "04 January 2021",
        },
        {
          gaId: 5,
          gaName: "DEFRA",
          status: "DRAFT",
          lastModifiedDate: "04 January 2021",
        },
        {
          gaId: 1,
          gaName: "Welsh assembly government",
          status: "DRAFT",
          lastModifiedDate: "04 January 2021",
        },
      ],
    },
  });

  global.dashboardawards = {
    grantingAuthorityUserActionCount: {
      totalGrantingAuthority: 67,
      totalActiveGA: 0,
      totalDeactiveGA: 0,
    },
    awardUserActionCount: {
      totalAwaitingAward: 264,
      totalDraftAward: 0,
      totalSubsidyAward: 283,
      totalPublishedAward: 9,
      totalDeletedAward: 0,
    },
    subsidyMeasureUserActionCount: {
      totalPublishedSubsidyMeasures: 0,
      totalDraftSubsidyMeasures: 114,
      totalSubsidyMeasures: 114,
      totalAwaitingSubsidyMeasures: 0,
      totalDeletedSubsidyMeasures: 0,
    },
    awardResponse: [
      {
        awardNumber: 225,
        subsidyFullAmountExact: "600,000",
        subsidyFullAmountRange: "£NA",
        subsidyObjective: "Employment",
        subsidyMeasureTitle: "Young Audiences Content Fund",
        status: "Rejected",
        gaName: "The Foundation for Social Entrepreneurs (T/A UnLtd)",
        lastModifiedDate: "12 January 2021",
        scNumber: "SC10112",
        subsidyInstrument: "Equity",
        beneficiaryName: "BEST MARIGOLD FILMS LIMITED",
      },
      {
        awardNumber: 224,
        subsidyFullAmountExact: "400,000",
        subsidyFullAmountRange: "£NA",
        subsidyObjective: "Training",
        subsidyMeasureTitle: "Woodland Carbon Fund",
        status: "Published",
        gaName: "Key Funds Investments Limited",
        lastModifiedDate: "12 January 2021",
        scNumber: "SC10111",
        subsidyInstrument: "Loan",
        beneficiaryName: "STREET CAT BOB FILM LIMITED",
      },
      {
        awardNumber: 218,
        subsidyFullAmountExact: "800,000",
        subsidyFullAmountRange: "£NA",
        subsidyObjective: "Research and development",
        subsidyMeasureTitle: "Walney Offshore Wind Farm",
        status: "Rejected",
        gaName: "The National Lottery Heritage Fund",
        lastModifiedDate: "12 January 2021",
        scNumber: "SC10104",
        subsidyInstrument: "Guarantee",
        beneficiaryName: "ANOTHER MOTHERS SON LTD",
      },
      {
        awardNumber: 220,
        subsidyFullAmountExact: "1,000,000",
        subsidyFullAmountRange: "£NA",
        subsidyObjective: "Energy efficiency",
        subsidyMeasureTitle: "Waterborne Freight Grant",
        status: "Rejected",
        gaName: "WM5G",
        lastModifiedDate: "12 January 2021",
        scNumber: "SC10106",
        subsidyInstrument: "Provision of goods or services below market prices",
        beneficiaryName: "Thalamus Health Ltd",
      },
      {
        awardNumber: 718,
        subsidyFullAmountExact: "0",
        subsidyFullAmountRange: "£30,000,001",
        subsidyObjective: "Research and development",
        subsidyMeasureTitle: "AHDB Generic Promotional Measures scheme",
        status: "Published",
        gaName: "HMRC",
        lastModifiedDate: "12 January 2021",
        scNumber: "SC10000",
        subsidyInstrument: "Loan",
        beneficiaryName: "DS SMITH PAPER LIMITED 100",
      },
    ],
    subsidyMeasureResponse: [
      {
        subsidyMeasureTitle: "Grant Assistance for the Historic Environment",
        scNumber: "SC10029",
        startDate: "2014-01-01",
        endDate: "2024-01-01",
        duration: "10 years 2 days ",
        budget: "300000000",
        gaName: "North East Combined Authority",
        lastModifiedDate: "06 January 2021",
      },
      {
        subsidyMeasureTitle: "AHDB Generic Promotional Measures scheme",
        scNumber: "SC10000",
        startDate: "2015-04-01",
        endDate: "2021-03-31",
        duration: "6 years 1 day ",
        budget: "120000000",
        gaName: "Welsh assembly government",
        lastModifiedDate: "04 January 2021",
      },
      {
        subsidyMeasureTitle: "AHDB Promotional Measures scheme",
        scNumber: "SC10001",
        startDate: "2014-10-23",
        endDate: "2021-03-31",
        duration: "6 years 5 months 3 weeks ",
        budget: "180000000",
        gaName: "Scottish Government",
        lastModifiedDate: "04 January 2021",
      },
      {
        subsidyMeasureTitle: "Aid for economic development - Growth Deal",
        scNumber: "SC10002",
        startDate: "2015-04-01",
        endDate: "2021-03-31",
        duration: "6 years 1 day ",
        budget: "64000000",
        gaName: "Northern Ireland",
        lastModifiedDate: "04 January 2021",
      },
      {
        subsidyMeasureTitle: "Aid for economic development - Growth Deal",
        scNumber: "SC10003",
        startDate: "2015-04-01",
        endDate: "2021-03-31",
        duration: "6 years 1 day ",
        budget: "64000000",
        gaName: "HMRC",
        lastModifiedDate: "04 January 2021",
      },
    ],
    grantingAuthorityResponse: [
      {
        gaId: 2,
        gaName: "Scottish Government",
        status: "DRAFT",
        lastModifiedDate: "04 January 2021",
      },
      {
        gaId: 3,
        gaName: "Northern Ireland",
        status: "DRAFT",
        lastModifiedDate: "04 January 2021",
      },
      {
        gaId: 4,
        gaName: "HMRC",
        status: "DRAFT",
        lastModifiedDate: "04 January 2021",
      },
      {
        gaId: 5,
        gaName: "DEFRA",
        status: "DRAFT",
        lastModifiedDate: "04 January 2021",
      },
      {
        gaId: 1,
        gaName: "Welsh assembly government",
        status: "DRAFT",
        lastModifiedDate: "04 January 2021",
      },
    ],
  };
  // global.process = {
  //   argv: ["", "", "env=dev"],
  // };
  global.process.argv = ["", "", "env=dev"];
  global.beis_url_accessmanagement =
    "https://dev-beis-tp-db-accessmanagement-service-app.azurewebsites.net";
  const req = mockRequest();

  const res = {};
  request(app)
    .post("/choosedashboard", (req, res))
    .send({
      dashboard_username: "Andrew Davis",
      dashboard_roles: "Granting Authority Administrator",
      dashboard_GA: "",
    })
    .expect(200, done);
  // expect(abcd).toBe(200);
});

test("Unit testing for Choose Dashboard GA Approver Test for POST call", (done) => {
  axios.get.mockResolvedValue({
    status: 200,
    data: {
      grantingAuthorityUserActionCount: {
        totalGrantingAuthority: 67,
        totalActiveGA: 0,
        totalDeactiveGA: 0,
      },
      awardUserActionCount: {
        totalAwaitingAward: 264,
        totalDraftAward: 0,
        totalSubsidyAward: 283,
        totalPublishedAward: 9,
        totalDeletedAward: 0,
      },
      subsidyMeasureUserActionCount: {
        totalPublishedSubsidyMeasures: 0,
        totalDraftSubsidyMeasures: 114,
        totalSubsidyMeasures: 114,
        totalAwaitingSubsidyMeasures: 0,
        totalDeletedSubsidyMeasures: 0,
      },
      awardResponse: [
        {
          awardNumber: 225,
          subsidyFullAmountExact: "600,000",
          subsidyFullAmountRange: "£NA",
          subsidyObjective: "Employment",
          subsidyMeasureTitle: "Young Audiences Content Fund",
          status: "Rejected",
          gaName: "The Foundation for Social Entrepreneurs (T/A UnLtd)",
          lastModifiedDate: "12 January 2021",
          scNumber: "SC10112",
          subsidyInstrument: "Equity",
          beneficiaryName: "BEST MARIGOLD FILMS LIMITED",
        },
        {
          awardNumber: 224,
          subsidyFullAmountExact: "400,000",
          subsidyFullAmountRange: "£NA",
          subsidyObjective: "Training",
          subsidyMeasureTitle: "Woodland Carbon Fund",
          status: "Published",
          gaName: "Key Funds Investments Limited",
          lastModifiedDate: "12 January 2021",
          scNumber: "SC10111",
          subsidyInstrument: "Loan",
          beneficiaryName: "STREET CAT BOB FILM LIMITED",
        },
        {
          awardNumber: 218,
          subsidyFullAmountExact: "800,000",
          subsidyFullAmountRange: "£NA",
          subsidyObjective: "Research and development",
          subsidyMeasureTitle: "Walney Offshore Wind Farm",
          status: "Rejected",
          gaName: "The National Lottery Heritage Fund",
          lastModifiedDate: "12 January 2021",
          scNumber: "SC10104",
          subsidyInstrument: "Guarantee",
          beneficiaryName: "ANOTHER MOTHERS SON LTD",
        },
        {
          awardNumber: 220,
          subsidyFullAmountExact: "1,000,000",
          subsidyFullAmountRange: "£NA",
          subsidyObjective: "Energy efficiency",
          subsidyMeasureTitle: "Waterborne Freight Grant",
          status: "Rejected",
          gaName: "WM5G",
          lastModifiedDate: "12 January 2021",
          scNumber: "SC10106",
          subsidyInstrument:
            "Provision of goods or services below market prices",
          beneficiaryName: "Thalamus Health Ltd",
        },
        {
          awardNumber: 718,
          subsidyFullAmountExact: "0",
          subsidyFullAmountRange: "£30,000,001",
          subsidyObjective: "Research and development",
          subsidyMeasureTitle: "AHDB Generic Promotional Measures scheme",
          status: "Published",
          gaName: "HMRC",
          lastModifiedDate: "12 January 2021",
          scNumber: "SC10000",
          subsidyInstrument: "Loan",
          beneficiaryName: "DS SMITH PAPER LIMITED 100",
        },
      ],
      subsidyMeasureResponse: [
        {
          subsidyMeasureTitle: "Grant Assistance for the Historic Environment",
          scNumber: "SC10029",
          startDate: "2014-01-01",
          endDate: "2024-01-01",
          duration: "10 years 2 days ",
          budget: "300000000",
          gaName: "North East Combined Authority",
          lastModifiedDate: "06 January 2021",
        },
        {
          subsidyMeasureTitle: "AHDB Generic Promotional Measures scheme",
          scNumber: "SC10000",
          startDate: "2015-04-01",
          endDate: "2021-03-31",
          duration: "6 years 1 day ",
          budget: "120000000",
          gaName: "Welsh assembly government",
          lastModifiedDate: "04 January 2021",
        },
        {
          subsidyMeasureTitle: "AHDB Promotional Measures scheme",
          scNumber: "SC10001",
          startDate: "2014-10-23",
          endDate: "2021-03-31",
          duration: "6 years 5 months 3 weeks ",
          budget: "180000000",
          gaName: "Scottish Government",
          lastModifiedDate: "04 January 2021",
        },
        {
          subsidyMeasureTitle: "Aid for economic development - Growth Deal",
          scNumber: "SC10002",
          startDate: "2015-04-01",
          endDate: "2021-03-31",
          duration: "6 years 1 day ",
          budget: "64000000",
          gaName: "Northern Ireland",
          lastModifiedDate: "04 January 2021",
        },
        {
          subsidyMeasureTitle: "Aid for economic development - Growth Deal",
          scNumber: "SC10003",
          startDate: "2015-04-01",
          endDate: "2021-03-31",
          duration: "6 years 1 day ",
          budget: "64000000",
          gaName: "HMRC",
          lastModifiedDate: "04 January 2021",
        },
      ],
      grantingAuthorityResponse: [
        {
          gaId: 2,
          gaName: "Scottish Government",
          status: "DRAFT",
          lastModifiedDate: "04 January 2021",
        },
        {
          gaId: 3,
          gaName: "Northern Ireland",
          status: "DRAFT",
          lastModifiedDate: "04 January 2021",
        },
        {
          gaId: 4,
          gaName: "HMRC",
          status: "DRAFT",
          lastModifiedDate: "04 January 2021",
        },
        {
          gaId: 5,
          gaName: "DEFRA",
          status: "DRAFT",
          lastModifiedDate: "04 January 2021",
        },
        {
          gaId: 1,
          gaName: "Welsh assembly government",
          status: "DRAFT",
          lastModifiedDate: "04 January 2021",
        },
      ],
    },
  });

  global.dashboardawards = {
    grantingAuthorityUserActionCount: {
      totalGrantingAuthority: 67,
      totalActiveGA: 0,
      totalDeactiveGA: 0,
    },
    awardUserActionCount: {
      totalAwaitingAward: 264,
      totalDraftAward: 0,
      totalSubsidyAward: 283,
      totalPublishedAward: 9,
      totalDeletedAward: 0,
    },
    subsidyMeasureUserActionCount: {
      totalPublishedSubsidyMeasures: 0,
      totalDraftSubsidyMeasures: 114,
      totalSubsidyMeasures: 114,
      totalAwaitingSubsidyMeasures: 0,
      totalDeletedSubsidyMeasures: 0,
    },
    awardResponse: [
      {
        awardNumber: 225,
        subsidyFullAmountExact: "600,000",
        subsidyFullAmountRange: "£NA",
        subsidyObjective: "Employment",
        subsidyMeasureTitle: "Young Audiences Content Fund",
        status: "Rejected",
        gaName: "The Foundation for Social Entrepreneurs (T/A UnLtd)",
        lastModifiedDate: "12 January 2021",
        scNumber: "SC10112",
        subsidyInstrument: "Equity",
        beneficiaryName: "BEST MARIGOLD FILMS LIMITED",
      },
      {
        awardNumber: 224,
        subsidyFullAmountExact: "400,000",
        subsidyFullAmountRange: "£NA",
        subsidyObjective: "Training",
        subsidyMeasureTitle: "Woodland Carbon Fund",
        status: "Published",
        gaName: "Key Funds Investments Limited",
        lastModifiedDate: "12 January 2021",
        scNumber: "SC10111",
        subsidyInstrument: "Loan",
        beneficiaryName: "STREET CAT BOB FILM LIMITED",
      },
      {
        awardNumber: 218,
        subsidyFullAmountExact: "800,000",
        subsidyFullAmountRange: "£NA",
        subsidyObjective: "Research and development",
        subsidyMeasureTitle: "Walney Offshore Wind Farm",
        status: "Rejected",
        gaName: "The National Lottery Heritage Fund",
        lastModifiedDate: "12 January 2021",
        scNumber: "SC10104",
        subsidyInstrument: "Guarantee",
        beneficiaryName: "ANOTHER MOTHERS SON LTD",
      },
      {
        awardNumber: 220,
        subsidyFullAmountExact: "1,000,000",
        subsidyFullAmountRange: "£NA",
        subsidyObjective: "Energy efficiency",
        subsidyMeasureTitle: "Waterborne Freight Grant",
        status: "Rejected",
        gaName: "WM5G",
        lastModifiedDate: "12 January 2021",
        scNumber: "SC10106",
        subsidyInstrument: "Provision of goods or services below market prices",
        beneficiaryName: "Thalamus Health Ltd",
      },
      {
        awardNumber: 718,
        subsidyFullAmountExact: "0",
        subsidyFullAmountRange: "£30,000,001",
        subsidyObjective: "Research and development",
        subsidyMeasureTitle: "AHDB Generic Promotional Measures scheme",
        status: "Published",
        gaName: "HMRC",
        lastModifiedDate: "12 January 2021",
        scNumber: "SC10000",
        subsidyInstrument: "Loan",
        beneficiaryName: "DS SMITH PAPER LIMITED 100",
      },
    ],
    subsidyMeasureResponse: [
      {
        subsidyMeasureTitle: "Grant Assistance for the Historic Environment",
        scNumber: "SC10029",
        startDate: "2014-01-01",
        endDate: "2024-01-01",
        duration: "10 years 2 days ",
        budget: "300000000",
        gaName: "North East Combined Authority",
        lastModifiedDate: "06 January 2021",
      },
      {
        subsidyMeasureTitle: "AHDB Generic Promotional Measures scheme",
        scNumber: "SC10000",
        startDate: "2015-04-01",
        endDate: "2021-03-31",
        duration: "6 years 1 day ",
        budget: "120000000",
        gaName: "Welsh assembly government",
        lastModifiedDate: "04 January 2021",
      },
      {
        subsidyMeasureTitle: "AHDB Promotional Measures scheme",
        scNumber: "SC10001",
        startDate: "2014-10-23",
        endDate: "2021-03-31",
        duration: "6 years 5 months 3 weeks ",
        budget: "180000000",
        gaName: "Scottish Government",
        lastModifiedDate: "04 January 2021",
      },
      {
        subsidyMeasureTitle: "Aid for economic development - Growth Deal",
        scNumber: "SC10002",
        startDate: "2015-04-01",
        endDate: "2021-03-31",
        duration: "6 years 1 day ",
        budget: "64000000",
        gaName: "Northern Ireland",
        lastModifiedDate: "04 January 2021",
      },
      {
        subsidyMeasureTitle: "Aid for economic development - Growth Deal",
        scNumber: "SC10003",
        startDate: "2015-04-01",
        endDate: "2021-03-31",
        duration: "6 years 1 day ",
        budget: "64000000",
        gaName: "HMRC",
        lastModifiedDate: "04 January 2021",
      },
    ],
    grantingAuthorityResponse: [
      {
        gaId: 2,
        gaName: "Scottish Government",
        status: "DRAFT",
        lastModifiedDate: "04 January 2021",
      },
      {
        gaId: 3,
        gaName: "Northern Ireland",
        status: "DRAFT",
        lastModifiedDate: "04 January 2021",
      },
      {
        gaId: 4,
        gaName: "HMRC",
        status: "DRAFT",
        lastModifiedDate: "04 January 2021",
      },
      {
        gaId: 5,
        gaName: "DEFRA",
        status: "DRAFT",
        lastModifiedDate: "04 January 2021",
      },
      {
        gaId: 1,
        gaName: "Welsh assembly government",
        status: "DRAFT",
        lastModifiedDate: "04 January 2021",
      },
    ],
  };
  // global.process = {
  //   argv: ["", "", "env=dev"],
  // };
  global.process.argv = ["", "", "env=dev"];
  global.beis_url_accessmanagement =
    "https://dev-beis-tp-db-accessmanagement-service-app.azurewebsites.net";
  const req = mockRequest();

  const res = {};
  request(app)
    .post("/choosedashboard", (req, res))
    .send({
      dashboard_username: "Andrew Davis",
      dashboard_roles: "Granting Authority Approver",
      dashboard_GA: "",
    })
    .expect(200, done);
  // expect(abcd).toBe(200);
});

test("Unit testing for Choose Dashboard Encoder Test for POST call", (done) => {
  axios.get.mockResolvedValue({
    status: 200,
    data: {
      grantingAuthorityUserActionCount: {
        totalGrantingAuthority: 67,
        totalActiveGA: 0,
        totalDeactiveGA: 0,
      },
      awardUserActionCount: {
        totalAwaitingAward: 264,
        totalDraftAward: 0,
        totalSubsidyAward: 283,
        totalPublishedAward: 9,
        totalDeletedAward: 0,
      },
      subsidyMeasureUserActionCount: {
        totalPublishedSubsidyMeasures: 0,
        totalDraftSubsidyMeasures: 114,
        totalSubsidyMeasures: 114,
        totalAwaitingSubsidyMeasures: 0,
        totalDeletedSubsidyMeasures: 0,
      },
      awardResponse: [
        {
          awardNumber: 225,
          subsidyFullAmountExact: "600,000",
          subsidyFullAmountRange: "£NA",
          subsidyObjective: "Employment",
          subsidyMeasureTitle: "Young Audiences Content Fund",
          status: "Rejected",
          gaName: "The Foundation for Social Entrepreneurs (T/A UnLtd)",
          lastModifiedDate: "12 January 2021",
          scNumber: "SC10112",
          subsidyInstrument: "Equity",
          beneficiaryName: "BEST MARIGOLD FILMS LIMITED",
        },
        {
          awardNumber: 224,
          subsidyFullAmountExact: "400,000",
          subsidyFullAmountRange: "£NA",
          subsidyObjective: "Training",
          subsidyMeasureTitle: "Woodland Carbon Fund",
          status: "Published",
          gaName: "Key Funds Investments Limited",
          lastModifiedDate: "12 January 2021",
          scNumber: "SC10111",
          subsidyInstrument: "Loan",
          beneficiaryName: "STREET CAT BOB FILM LIMITED",
        },
        {
          awardNumber: 218,
          subsidyFullAmountExact: "800,000",
          subsidyFullAmountRange: "£NA",
          subsidyObjective: "Research and development",
          subsidyMeasureTitle: "Walney Offshore Wind Farm",
          status: "Rejected",
          gaName: "The National Lottery Heritage Fund",
          lastModifiedDate: "12 January 2021",
          scNumber: "SC10104",
          subsidyInstrument: "Guarantee",
          beneficiaryName: "ANOTHER MOTHERS SON LTD",
        },
        {
          awardNumber: 220,
          subsidyFullAmountExact: "1,000,000",
          subsidyFullAmountRange: "£NA",
          subsidyObjective: "Energy efficiency",
          subsidyMeasureTitle: "Waterborne Freight Grant",
          status: "Rejected",
          gaName: "WM5G",
          lastModifiedDate: "12 January 2021",
          scNumber: "SC10106",
          subsidyInstrument:
            "Provision of goods or services below market prices",
          beneficiaryName: "Thalamus Health Ltd",
        },
        {
          awardNumber: 718,
          subsidyFullAmountExact: "0",
          subsidyFullAmountRange: "£30,000,001",
          subsidyObjective: "Research and development",
          subsidyMeasureTitle: "AHDB Generic Promotional Measures scheme",
          status: "Published",
          gaName: "HMRC",
          lastModifiedDate: "12 January 2021",
          scNumber: "SC10000",
          subsidyInstrument: "Loan",
          beneficiaryName: "DS SMITH PAPER LIMITED 100",
        },
      ],
      subsidyMeasureResponse: [
        {
          subsidyMeasureTitle: "Grant Assistance for the Historic Environment",
          scNumber: "SC10029",
          startDate: "2014-01-01",
          endDate: "2024-01-01",
          duration: "10 years 2 days ",
          budget: "300000000",
          gaName: "North East Combined Authority",
          lastModifiedDate: "06 January 2021",
        },
        {
          subsidyMeasureTitle: "AHDB Generic Promotional Measures scheme",
          scNumber: "SC10000",
          startDate: "2015-04-01",
          endDate: "2021-03-31",
          duration: "6 years 1 day ",
          budget: "120000000",
          gaName: "Welsh assembly government",
          lastModifiedDate: "04 January 2021",
        },
        {
          subsidyMeasureTitle: "AHDB Promotional Measures scheme",
          scNumber: "SC10001",
          startDate: "2014-10-23",
          endDate: "2021-03-31",
          duration: "6 years 5 months 3 weeks ",
          budget: "180000000",
          gaName: "Scottish Government",
          lastModifiedDate: "04 January 2021",
        },
        {
          subsidyMeasureTitle: "Aid for economic development - Growth Deal",
          scNumber: "SC10002",
          startDate: "2015-04-01",
          endDate: "2021-03-31",
          duration: "6 years 1 day ",
          budget: "64000000",
          gaName: "Northern Ireland",
          lastModifiedDate: "04 January 2021",
        },
        {
          subsidyMeasureTitle: "Aid for economic development - Growth Deal",
          scNumber: "SC10003",
          startDate: "2015-04-01",
          endDate: "2021-03-31",
          duration: "6 years 1 day ",
          budget: "64000000",
          gaName: "HMRC",
          lastModifiedDate: "04 January 2021",
        },
      ],
      grantingAuthorityResponse: [
        {
          gaId: 2,
          gaName: "Scottish Government",
          status: "DRAFT",
          lastModifiedDate: "04 January 2021",
        },
        {
          gaId: 3,
          gaName: "Northern Ireland",
          status: "DRAFT",
          lastModifiedDate: "04 January 2021",
        },
        {
          gaId: 4,
          gaName: "HMRC",
          status: "DRAFT",
          lastModifiedDate: "04 January 2021",
        },
        {
          gaId: 5,
          gaName: "DEFRA",
          status: "DRAFT",
          lastModifiedDate: "04 January 2021",
        },
        {
          gaId: 1,
          gaName: "Welsh assembly government",
          status: "DRAFT",
          lastModifiedDate: "04 January 2021",
        },
      ],
    },
  });

  global.dashboardawards = {
    grantingAuthorityUserActionCount: {
      totalGrantingAuthority: 67,
      totalActiveGA: 0,
      totalDeactiveGA: 0,
    },
    awardUserActionCount: {
      totalAwaitingAward: 264,
      totalDraftAward: 0,
      totalSubsidyAward: 283,
      totalPublishedAward: 9,
      totalDeletedAward: 0,
    },
    subsidyMeasureUserActionCount: {
      totalPublishedSubsidyMeasures: 0,
      totalDraftSubsidyMeasures: 114,
      totalSubsidyMeasures: 114,
      totalAwaitingSubsidyMeasures: 0,
      totalDeletedSubsidyMeasures: 0,
    },
    awardResponse: [
      {
        awardNumber: 225,
        subsidyFullAmountExact: "600,000",
        subsidyFullAmountRange: "£NA",
        subsidyObjective: "Employment",
        subsidyMeasureTitle: "Young Audiences Content Fund",
        status: "Rejected",
        gaName: "The Foundation for Social Entrepreneurs (T/A UnLtd)",
        lastModifiedDate: "12 January 2021",
        scNumber: "SC10112",
        subsidyInstrument: "Equity",
        beneficiaryName: "BEST MARIGOLD FILMS LIMITED",
      },
      {
        awardNumber: 224,
        subsidyFullAmountExact: "400,000",
        subsidyFullAmountRange: "£NA",
        subsidyObjective: "Training",
        subsidyMeasureTitle: "Woodland Carbon Fund",
        status: "Published",
        gaName: "Key Funds Investments Limited",
        lastModifiedDate: "12 January 2021",
        scNumber: "SC10111",
        subsidyInstrument: "Loan",
        beneficiaryName: "STREET CAT BOB FILM LIMITED",
      },
      {
        awardNumber: 218,
        subsidyFullAmountExact: "800,000",
        subsidyFullAmountRange: "£NA",
        subsidyObjective: "Research and development",
        subsidyMeasureTitle: "Walney Offshore Wind Farm",
        status: "Rejected",
        gaName: "The National Lottery Heritage Fund",
        lastModifiedDate: "12 January 2021",
        scNumber: "SC10104",
        subsidyInstrument: "Guarantee",
        beneficiaryName: "ANOTHER MOTHERS SON LTD",
      },
      {
        awardNumber: 220,
        subsidyFullAmountExact: "1,000,000",
        subsidyFullAmountRange: "£NA",
        subsidyObjective: "Energy efficiency",
        subsidyMeasureTitle: "Waterborne Freight Grant",
        status: "Rejected",
        gaName: "WM5G",
        lastModifiedDate: "12 January 2021",
        scNumber: "SC10106",
        subsidyInstrument: "Provision of goods or services below market prices",
        beneficiaryName: "Thalamus Health Ltd",
      },
      {
        awardNumber: 718,
        subsidyFullAmountExact: "0",
        subsidyFullAmountRange: "£30,000,001",
        subsidyObjective: "Research and development",
        subsidyMeasureTitle: "AHDB Generic Promotional Measures scheme",
        status: "Published",
        gaName: "HMRC",
        lastModifiedDate: "12 January 2021",
        scNumber: "SC10000",
        subsidyInstrument: "Loan",
        beneficiaryName: "DS SMITH PAPER LIMITED 100",
      },
    ],
    subsidyMeasureResponse: [
      {
        subsidyMeasureTitle: "Grant Assistance for the Historic Environment",
        scNumber: "SC10029",
        startDate: "2014-01-01",
        endDate: "2024-01-01",
        duration: "10 years 2 days ",
        budget: "300000000",
        gaName: "North East Combined Authority",
        lastModifiedDate: "06 January 2021",
      },
      {
        subsidyMeasureTitle: "AHDB Generic Promotional Measures scheme",
        scNumber: "SC10000",
        startDate: "2015-04-01",
        endDate: "2021-03-31",
        duration: "6 years 1 day ",
        budget: "120000000",
        gaName: "Welsh assembly government",
        lastModifiedDate: "04 January 2021",
      },
      {
        subsidyMeasureTitle: "AHDB Promotional Measures scheme",
        scNumber: "SC10001",
        startDate: "2014-10-23",
        endDate: "2021-03-31",
        duration: "6 years 5 months 3 weeks ",
        budget: "180000000",
        gaName: "Scottish Government",
        lastModifiedDate: "04 January 2021",
      },
      {
        subsidyMeasureTitle: "Aid for economic development - Growth Deal",
        scNumber: "SC10002",
        startDate: "2015-04-01",
        endDate: "2021-03-31",
        duration: "6 years 1 day ",
        budget: "64000000",
        gaName: "Northern Ireland",
        lastModifiedDate: "04 January 2021",
      },
      {
        subsidyMeasureTitle: "Aid for economic development - Growth Deal",
        scNumber: "SC10003",
        startDate: "2015-04-01",
        endDate: "2021-03-31",
        duration: "6 years 1 day ",
        budget: "64000000",
        gaName: "HMRC",
        lastModifiedDate: "04 January 2021",
      },
    ],
    grantingAuthorityResponse: [
      {
        gaId: 2,
        gaName: "Scottish Government",
        status: "DRAFT",
        lastModifiedDate: "04 January 2021",
      },
      {
        gaId: 3,
        gaName: "Northern Ireland",
        status: "DRAFT",
        lastModifiedDate: "04 January 2021",
      },
      {
        gaId: 4,
        gaName: "HMRC",
        status: "DRAFT",
        lastModifiedDate: "04 January 2021",
      },
      {
        gaId: 5,
        gaName: "DEFRA",
        status: "DRAFT",
        lastModifiedDate: "04 January 2021",
      },
      {
        gaId: 1,
        gaName: "Welsh assembly government",
        status: "DRAFT",
        lastModifiedDate: "04 January 2021",
      },
    ],
  };
  // global.process = {
  //   argv: ["", "", "env=dev"],
  // };
  global.process.argv = ["", "", "env=stag"];
  global.beis_url_accessmanagement =
    "https://dev-beis-tp-db-accessmanagement-service-app.azurewebsites.net";
  const req = mockRequest();

  const res = {};
  request(app)
    .post("/choosedashboard", (req, res))
    .send({
      dashboard_username: "Andrew Davis",
      dashboard_roles: "Granting Authority Encoder",
      dashboard_GA: "",
    })
    .expect(200, done);
  // expect(abcd).toBe(200);
});
